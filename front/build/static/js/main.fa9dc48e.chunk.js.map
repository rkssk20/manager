{"version":3,"sources":["hooks/useLogin.js","views/Navbar.js","hooks/usePost.js","components/Post/Profile.js","components/Post/Work.js","components/Post/Review.js","components/Login.js","Atoms/Favorites.js","components/Post/Detail.js","components/Post/Post.js","views/NotFound.js","views/TimelinePage.js","hooks/useUserRanking.js","hooks/useAccount.js","Atoms/Header.js","views/Ranking/UserRanking.js","Atoms/Form.js","Atoms/MaterialTabs.js","Atoms/ButtonTabs.js","components/Review/Movie.js","components/Review/Music.js","components/Review/Book.js","components/Review/Anime.js","components/Review/Item.js","Atoms/FollowButton.js","components/AccountItem.js","views/Search/SearchPage.js","hooks/useRanking.js","views/Ranking/WorkRanking.js","views/Ranking/RankingPage.js","hooks/useWorkRanking.js","views/Review/Search.js","Atoms/MaterialButton.js","views/Review/Write.js","views/Review/ReviewPage.js","hooks/useMyPost.js","hooks/useAccountData.js","views/Account/Profile.js","views/Account/Works.js","hooks/useLike.js","views/Account/Likes.js","views/Account/AccountPage.js","components/Icon.js","views/Setting.js","hooks/useWorkPost.js","components/Work/Movie.js","components/Work/Music.js","components/Work/Book.js","components/Work/Anime.js","hooks/useStar.js","views/Work/Introduction.js","views/Work/WorkPage.js","App.js","index.js"],"names":["useLogin","useAuth0","user","isLoading","useState","userData","setUserData","useEffect","document","cookie","includes","data","id","sub","myAccount","fetch","method","body","JSON","stringify","headers","Headers","then","response","json","result","catch","useStyles","makeStyles","theme","header","maxWidth","padding","left","right","backgroundColor","boxShadow","zIndex","item","fontSize","justifyContent","height","footer","position","bottom","color","primary","action","minWidth","tool","minHeight","title","margin","postion","cursor","userSelect","setting","Navbar","location","useLocation","useContext","UserContext","logout","setId","showMenu","setShowMenu","pathname","value","setValue","wide","useMediaQuery","classes","user_id","closeMenu","AppBar","className","Toolbar","style","Typography","onClick","window","scrollTo","top","behavior","variant","indexOf","IconButton","aria-controls","e","currentTarget","Menu","anchorEl","keepMounted","open","Boolean","onClose","MenuItem","component","Link","to","Divider","returnTo","origin","BottomNavigation","onChange","event","newValue","BottomNavigationAction","label","icon","disabled","usePost","accountData","page","postData","setPostData","hasMore","setHasMore","prev","length","avatar","width","myName","marginRight","Profile","props","history","useHistory","onAvatar","stopPropagation","push","ListItem","ListItemAvatar","Avatar","src","picture","alt","ListItemText","user_name","work","borderRadius","border","img","maxHeight","noimg","details","display","flexDirection","alignItems","textAlign","WebkitLineClamp","WebkitBoxOrient","overflow","lineHeight","name","Work","image","closeReview","closeNeta","filter","showReview","neta","transform","WebkitTransform","closeButton","openButton","expandIcon","Review","openReview","setOpenReview","review_id","review","FormControlLabel","control","Checkbox","checkedIcon","checked","dialog","fontWeight","button","easy","flex","text","Login","loginWithRedirect","Dialog","DialogTitle","List","Button","disableElevation","path","redirectUri","subRight","likes","Favorites","checkFavorite","setCheckFavorite","favoriteCount","setFavoriteCount","loginPopup","setLoginPopup","Ilike","check","disableRipple","String","slice","detail","subLeft","Detail","postTime","Date","created_at","time","reload","ranking","star","Rating","defaultValue","precision","size","readOnly","Math","floor","getFullYear","getMonth","getDate","profile","Item","work_id","genru","ref","lastElementRef","Post","map","i","NotFound","account","timeline","TimelinePage","setPage","observer","useRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useUserRanking","resultList","setResultList","useAccount","searchSubmit","searchGenru","setAccountData","Header","marginLeft","marginTop","Paper","square","elevation","badge","list","marginBottom","whiteSpace","textOverflow","UserRanking","step","index","Badge","badgeContent","anchorOrigin","vertical","horizontal","form","base","paddingLeft","Form","searchTitle","setSearchTitle","InputBase","placeholder","target","type","aria-label","setSearchSubmit","preventDefault","MaterialTabs","tab","tabChoice","Tabs","tabValue","setTabValue","indicatorColor","Tab","ButttonTab","mini","makeStyales","all","movie","music","book","anime","back","onButton","Number","Movie","searchMovie","setSearchMovie","REACT_APP_MOVIE","process","a","results","number","directorList","director","crew","forEach","job","poster_path","join","date","release_date","Music","searchItem","setSearchItem","submit","Book","totalItems","items","volumeInfo","imageLinks","thumbnail","authors","publishedDate","useAnime","searchAnime","setSearchAnime","max","works","images","recommended_url","media_text","season_name_text","box","paddingRight","search","gutterBottom","add","FollowButton","checkFollow","setCheckFollow","follow","follower_id","AccountItem","follow_id","secondary","ItemList","workList","children","Anime","AccountResult","accountResult","TabPanel2","other","role","hidden","aria-labelledby","Result2","TabPanel","Result","SearchPage","useRanking","like","Promise","LikeRanking","intro","RankingPage","WorkRanking","CircularProgress","useWorkRanking","Search","MaterialButton","endIcon","pushSubmit","paper","field","input","netaText","Write","locationList","state","dialogTitle","paddingBottom","content","backdrop","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","reviewText","setReviewText","reviewNeta","setReviewNeta","reviewStar","setReviewStar","errorMessage","setErrorMessage","PaperProps","BackdropProps","fullWidth","scroll","DialogContent","TextField","InputProps","multiline","rows","Switch","ReviewPage","exact","useMyPost","account_id","useAccountData","paramsId","avator","referrer","paddingTop","follower","visibility","hover","TabChildren","GridList","cols","GridListTile","ButtonBase","Works","useLike","Likes","AccountPage","params","useParams","setParamsId","canvas","App","imgRef","previewCanvasRef","unit","aspect","crop","setCrop","canvasResult","setCanvasResult","completedCrop","setCompletedCrop","onLoad","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","pixelRatio","devicePixelRatio","setTransform","imageSmoothingQuality","drawImage","x","y","toBlob","b","Backdrop","ClickAwayListener","onClickAway","setInputImage","inputImage","onImageLoaded","circularCrop","onComplete","setCropResult","cancel","spacing","opacity","typo","borderColor","Setting","imageName","setImageName","cropResult","inputName","setInputName","inputId","setInputId","inputProf","setInputProf","match","pictureHead","timeCheck","resTimeCheck","FormData","formData","append","sendS3","successPicture","isFinite","day","round","old_id","onSubmit","URL","createObjectURL","htmlFor","accept","files","reader","FileReader","addEventListener","readAsDataURL","split","inputProps","maxLength","minLength","useWorkPost","overview","url","homepage","description","previewLink","official_site_url","useStar","average","setAverage","minImage","wideImage","minText","wideText","rate","Introduction","workData","onSite","createMuiTheme","palette","main","light","dark","typography","fontFamily","MuiButtonBase","createContext","PrivateRoute","ThemeProvider","Provider","WorkPage","REACT_APP_AUTH0_DOMAIN","ReactDOM","render","StrictMode","domain","clientId","audience","getElementById"],"mappings":"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","file":"static/js/main.fa9dc48e.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nfunction useLogin(){\n  const { user, isLoading } = useAuth0();\n  const [userData, setUserData] = useState('loading');\n  \n  useEffect(() => {\n    // cookieが存在すればログインしている\n    if(document.cookie.includes('auth0.is.authenticated')){\n      if(isLoading) return;\n\n      const data = {id: user.sub, myAccount: true};\n        \n      fetch('http://localhost:3100/profile', {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers : new Headers({ \"Content-type\" : \"application/json\" })\n      })\n      .then(response => response.json())\n      .then(result => setUserData(result[0]))\n      .catch(() => { setUserData('empty') });\n      \n    }else{\n      setUserData('empty');\n    };\n  }, [user, isLoading]);\n\n  return userData;\n};\n\nexport default useLogin;","import { useState, useEffect, useContext } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { UserContext } from '../App';\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport SearchIcon from '@material-ui/icons/Search';\nimport StarIcon from '@material-ui/icons/Star';\nimport CreateIcon from '@material-ui/icons/Create';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    maxWidth: '100%',\n    padding: '0 calc((100% - 678px) / 2)',\n    left: 0,\n    right: 0,\n    backgroundColor:'rgba(255,255,255,0.8)',\n    boxShadow: 'none',\n    zIndex: 3,\n    '&.MuiAppBar-positionFixed': {\n      right: 'initial'\n    }\n  },\n  item: {\n    fontSize: 15,\n    justifyContent: 'center',\n    \"&.MuiListItem-root\": {\n      height: 68\n    }\n  },\n  footer: {\n    maxWidth: '100%',\n    height: 60,\n    padding: '0 calc((100% - 678px) / 2)',\n    backgroundColor: 'white',\n    zIndex: 5,\n    position: 'fixed',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    \"&.Mui-selected\": {\n      color: theme.primary\n    },\n  },\n  action: {\n    '&.MuiBottomNavigationAction-root': {\n      minWidth: 'calc((100% / 5) - 24px)'\n    }\n  }\n}));\n\nconst tool = {\n  maxWidth: 678,\n  minHeight: 50\n};\nconst title = {\n  margin: 'auto',\n  fontSize: 23,\n  color: 'black',\n  postion: 'absolute',\n  left: 0,\n  right: 0,\n  cursor: 'pointer',\n  userSelect:'none'\n};\nconst setting = {\n  position: 'absolute',\n  right: 10\n};\n\nfunction Navbar(){\n  const location = useLocation();\n  const userData = useContext(UserContext);\n  const { logout } = useAuth0();\n  const [id, setId] = useState('');\n  const [showMenu, setShowMenu] = useState(null);\n  const [value, setValue] = useState(location.pathname);\n  const wide = useMediaQuery('(min-width:500px)');\n  const classes = useStyles();\n\n  useEffect(() => {\n    if(userData === 'empty' || userData === 'loading') return;\n\n    setId(userData.user_id);\n  }, [userData]);\n\n  useEffect(() => {\n    // NavbarアイコンとURLが異なる時に合わせる\n    if(value === location.pathname) return;\n\n    setValue(location.pathname);\n  }, [location.pathname, value]);\n\n  const onTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  };\n\n  const openMenu = (e) => {\n    setShowMenu(e.currentTarget);\n  };\n\n  const closeMenu = () => {\n    setShowMenu(null);\n  };\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return(\n    <>\n      {/* header */}\n      <AppBar className={ classes.header } postion=\"static\">\n        <Toolbar style={ tool }>\n          <Typography style={ title } onClick={ onTop } variant=\"h3\">Audience</Typography>\n          {// ログイン中のユーザーが自分のアカウントページにアクセスした時、設定アイコンを表示\n            (location.pathname.indexOf('/account/' + id) === 0) && (userData !== 'loading') && (userData !== 'empty') && (\n            <>\n              {/* 設定アイコン */}\n              <IconButton\n                style={ setting }\n                aria-controls=\"simple-menu\"\n                onClick={ openMenu }\n              >\n                <MoreVertIcon style={{ fontSize: 25 }} />\n              </IconButton>\n\n              {/* メニュー */}\n              <Menu\n                // className={ classes.menu }\n                id=\"simple-menu\"\n                anchorEl={ showMenu }\n                keepMounted\n                open={ Boolean(showMenu) }\n                onClose={ closeMenu }\n              >\n                <MenuItem\n                  className={ classes.item }\n                  onClick={ closeMenu }\n                  component={ Link }\n                  to=\"/setting\"\n                >\n                  <SettingsIcon style={{ margin: '0 16px 0 0' }} fontSize=\"large\" />\n                  プロフィール設定\n                </MenuItem>\n                <Divider />\n                <MenuItem\n                  className={ classes.item }\n                  onClick={ () =>{ logout({ returnTo: window.location.origin }) }}\n                >\n                  ログアウト\n                </MenuItem>\n              </Menu>\n            </>\n          )}\n        </Toolbar>\n      </AppBar>\n\n      {/* footer */}\n      <BottomNavigation\n        className={ classes.footer }\n        value={ value }\n        onChange={ handleChange }\n      >\n        <BottomNavigationAction\n          className={ classes.action }\n          label={ wide && 'Timeline' }\n          value=\"/timeline\"\n          component={ Link }\n          to=\"/timeline\"\n          icon={<AccessTimeIcon\n            style={{ fontSize: 40 }}\n          />}\n        />\n        <BottomNavigationAction\n          className={ classes.action }\n          label={ wide && 'Search' }\n          value=\"/search\"\n          component={ Link }\n          to=\"/search\"\n          icon={<SearchIcon\n            style={{ fontSize: 40 }}\n          />}\n        />\n        <BottomNavigationAction\n          className={ classes.action }\n          label={ wide && 'Ranking' }\n          value=\"/\"\n          component={ Link }\n          to=\"/\"\n          icon={<StarIcon\n            style={{ fontSize: 40 }}\n          />}\n        />\n        <BottomNavigationAction\n          className={ classes.action }\n          label={ wide && 'Review' }\n          value=\"/review\"\n          component={ Link }\n          to=\"/review\"\n          icon={<CreateIcon\n            style={{ fontSize: 40 }}\n          />}\n        />\n        {\n          userData === 'loading' ?\n          <BottomNavigationAction\n            disabled\n            className={ classes.action }\n            label={ wide && 'Account' }\n            icon={<AccountCircleIcon\n              style={{ fontSize: 40 }}\n            />}\n          /> :\n          <BottomNavigationAction\n            className={ classes.action }\n            label={ wide && 'Account' }\n            value={ '/account/' + id }\n            component={ Link }\n            to={ '/account/' + id }\n            icon={<AccountCircleIcon\n              style={{ fontSize: 40 }}\n            />}\n          />\n        }\n      </BottomNavigation>\n    </>\n  );\n}\n\nexport default Navbar;\n","import { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../App';\n\n// レビューの取得\nfunction usePost(accountData, page){\n  const userData = useContext(UserContext);\n  const [postData, setPostData] = useState('');\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    if(!accountData) return;\n    \n    const data = {user_id: userData.user_id, page: page};\n    \n    fetch('http://localhost:3100/posts', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(result => {\n      // 0ページ目は初期化、それ以降は末尾に追加していく\n      if(page === 0){\n        setPostData(result);\n      }else{\n        setPostData(prev => [...prev, ...result]);\n      };\n\n      (result.length === 0) && setHasMore(false);\n    });\n  }, [accountData, page, userData.user_id]);\n\n  return {postData, hasMore};\n};\n\nexport default usePost;","import { useHistory } from 'react-router-dom';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Link from '@material-ui/core/Link';\n\nconst avatar = {\n  width: 45,\n  height: 'auto'\n};\nconst myName = {\n  fontSize: 18,\n  marginRight: 10\n};\nconst id = {\n  fontSize: 13,\n  color: '#757575'\n};\n\nfunction Profile(props){\n  const history = useHistory();\n\n  const onAvatar = (e) => {\n    e.stopPropagation();\n\n    history.push('/account/' + props.user_id);\n  };\n\n  return(\n    <ListItem>\n      {/* ユーザーアイコン */}\n      <ListItemAvatar onClick={ onAvatar }>\n        <Avatar\n          style={ avatar }\n          src={ props.picture }\n          alt=\"ユーザーアイコン\"\n        />\n      </ListItemAvatar>\n      \n      {/* 名前とID */}\n      <ListItemText>\n        <Link\n          component='button'\n          onClick={ onAvatar }\n          color=\"inherit\"\n        >\n          <span style={ myName }>\n            { props.user_name }\n          </span>\n          <span style={ id }>\n            @{ props.user_id }\n          </span>\n        </Link>\n      </ListItemText>\n    </ListItem>\n  );\n};\n\nexport default Profile;","import ListItem from '@material-ui/core/ListItem';\nimport Typography from '@material-ui/core/Typography';\nimport MovieIcon from '@material-ui/icons/Movie';\n\nconst work = {\n  width: 'calc(100% - 32px)',\n  margin: '0 16px',\n  borderRadius: 5,\n  border: '1px solid rgba(0, 0, 0, 0.12)'\n};\nconst img = {\n  maxWidth: 120,\n  maxHeight: 100,\n  borderRadius: 5,\n};\nconst noimg = {\n  width: 100,\n  height: 'auto'\n};\nconst details = {\n  width: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center'\n};\nconst title = {\n  fontSize: 15,\n  textAlign: 'center',\n  display: '-webkit-box',\n  WebkitLineClamp: 2,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  /*IE*/\n  lineHeight: 1.5,\n  maxHeight: 44,\n};\nconst name = {\n  fontSize: 13,\n  textAlign: 'center',\n  display: '-webkit-box',\n  WebkitLineClamp: 2,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  /*IE*/\n  lineHeight: 1.5,\n  maxHeight: 38,\n};\n\nfunction Work(props){\n  return(\n    <ListItem style={ work }>\n      {/* 作品イメージ */}\n      {\n        props.image ?\n        <img\n          style={ img }\n          src={ props.image }\n          alt=\"イメージ\"\n        /> :\n        <MovieIcon style={ noimg } />\n      }\n\n      {/* 作品タイトル */}\n      <div style={ details }>\n        <Typography style={ title }>\n          { props.title }\n        </Typography>\n        \n        <Typography style={ name }>\n          {props.name && ( props.name )}\n        </Typography>\n      </div>\n    </ListItem>\n  );\n};\n\nexport default Work;","import { useState } from 'react';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport Typography from '@material-ui/core/Typography';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport WarningIcon from '@material-ui/icons/Warning';\n\nconst closeReview = {\n  fontSize: 15,\n  width: 'calc(100% - 43px)',\n  display: '-webkit-box',\n  WebkitLineClamp: 2,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  /*IE*/\n  lineHeight: 1.8,\n  maxHeight: 54,\n};\nconst closeNeta = {\n  filter: 'blur(8px)',\n  fontSize: 15,\n  width: 'calc(100% - 43px)',\n  display: '-webkit-box',\n  WebkitLineClamp: 2,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  /*IE*/\n  lineHeight: 1.8,\n  maxHeight: '54',\n};\nconst showReview = {\n  fontSize: 15,\n  lineHeight: 1.8,\n  width: 'calc(100% - 43px)',\n};\nconst neta = {\n  fontSize: 15,\n  position: 'absolute',\n  left: '50%',\n  transform: 'translateX(-50%)',\n  WebkitTransform: 'translateX(-50%)',\n  display: 'flex',\n  alignItems: 'center',\n};\nconst closeButton = {\n  marginRight: 0,\n  position: 'absolute',\n  top: 0,\n  right: 16,\n};\nconst openButton = {\n  marginRight: 0,\n  position: 'absolute',\n  bottom: 0,\n  right: 16,\n};\nconst expandIcon = {\n  width: 25,\n  height: 'auto',\n};\n\nfunction Review(props){\n  const [openReview, setOpenReview] = useState(false);\n\n  function onExpand(e){\n    e.stopPropagation();\n    setOpenReview(!openReview);\n  };\n\n  return(\n    <ListItem>\n      {/* レビュー本文 */}\n      <Typography\n        style={\n          openReview ? showReview :\n          (props.neta === 0) ? closeReview : closeNeta\n        }\n        id={ props.review_id }\n      >\n        { props.review }\n      </Typography>\n\n      {/* ネタバレ */}\n      {!openReview && (props.neta === 1) && (\n        <Typography style={ neta } color='primary'>\n          <WarningIcon />\n          ネタバレが含まれています\n        </Typography>\n      )}\n\n      {/* 全文表示アイコン */}\n      <FormControlLabel\n        style={ openReview ? openButton : closeButton }\n        control={\n          <Checkbox\n            icon={<ExpandMoreIcon style={ expandIcon } />}\n            checkedIcon={<ExpandLessIcon style={ expandIcon } />}\n            name=\"expand\"\n            color=\"default\"\n            checked={ openReview }\n            onClick={ onExpand }\n          />\n        }\n      />\n    </ListItem>\n  );\n};\n\nexport default Review;","import { useAuth0 } from '@auth0/auth0-react';\nimport { useLocation } from 'react-router-dom';\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles(() => ({\n  dialog: {\n    '&.MuiDialog-root': {\n      zIndex: '4 !important'\n    },\n    '&.MuiPaper-paper': {\n      height: 250,\n      width: 250,\n    }\n  }\n}));\n\nconst title = {\n  width: 200,\n  fontSize: 15,\n  fontWeight: 600,\n};\nconst button = {\n  height: 80,\n  display: 'flex',\n  justifyContent: 'center'\n};\nconst easy = {\n  width: 150,\n  height: 50,\n  fontSize: 15\n};\nconst flex = {\n  display: 'flex',\n  justifyContent: 'center'\n};\nconst text = {\n  fontSize: 15,\n  textAlign: 'center'\n};\n\nfunction Login(){\n  const { loginWithRedirect } = useAuth0();\n  const location = useLocation();\n  const classes = useStyles();\n\n  const authLogin = () => {\n    let path;\n  \n    switch(location.pathname){\n      case '/account/':\n        path = '/';\n        break;\n      default:\n        path = '/';\n    };\n\n    loginWithRedirect({\n      // 開発環境\n      // redirectUri: `http://localhost:3000${ path }`\n      // 本番環境\n      redirectUri: `https://www.audience.cf${ path }`\n    });\n  };\n\n  return(\n    <Dialog\n      className={ classes.dialog }\n      open={ true }\n     >\n      <DialogTitle>\n        <Typography style={ title }>ログインしてください</Typography>\n      </DialogTitle>\n      <List>\n        <ListItem style={ button }>\n          <Button style={ easy } variant='contained' disableElevation fontSize=\"large\" color='primary' onClick={ authLogin }>\n            簡単ログイン\n          </Button>\n        </ListItem>\n\n        <ListItem style={ flex }>\n          <Typography style={ text }>\n            確認用のアカウントです。<br />\n            遷移先でIDとパスワードが<br />\n            自動で入力されます。\n          </Typography>\n        </ListItem>\n      </List>\n    </Dialog>\n  )\n}\n\nexport default Login;\n","import { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../App';\nimport Login from '../components/Login';\n\nimport Typography from '@material-ui/core/Typography';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Favorite from '@material-ui/icons/Favorite';\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\n\nconst subRight = {\n  display: 'flex',\n  alignItems: 'center'\n};\nconst likes = {\n  fontSize: 13,\n  minWidth: 60.97\n};\n\nfunction Favorites(props){\n  const [checkFavorite, setCheckFavorite] = useState(false);\n  const [favoriteCount, setFavoriteCount] = useState('');\n  const [loginPopup, setLoginPopup] = useState(false);\n  const userData = useContext(UserContext);\n\n  useEffect(() => {\n    if(!props.likes) return;\n    \n    setFavoriteCount(props.likes);\n\n    // 自分がその投稿にいいねしているなら、最初からいいねアイコンを赤くする\n    if(props.Ilike === userData.user_id){\n      setCheckFavorite(true);\n    }\n  },[props.likes, props.Ilike, userData.user_id]);\n\n  function onFavorite(e){\n    e.stopPropagation();\n\n    if(userData === 'empty'){\n      setLoginPopup(true);\n      \n    }else{\n      setCheckFavorite(!checkFavorite);\n\n      const data = {\n        review_id: props.review_id,\n        user_id: userData.user_id,\n        check: !checkFavorite\n      };\n\n      if(checkFavorite){\n        // いいねを外した時\n        setFavoriteCount(favoriteCount - 1);\n\n        fetch('http://localhost:3100/unLike', {\n          method: 'POST',\n          body: JSON.stringify(data),\n          headers : new Headers({ \"Content-type\" : \"application/json\" })\n        })\n        .catch(() => {\n          // エラーの時は処理前の値をセットして何もしない\n          setCheckFavorite(checkFavorite);\n          setFavoriteCount(favoriteCount);\n        });\n      }else{\n        // いいねした時\n        setFavoriteCount(favoriteCount + 1);\n\n        fetch('http://localhost:3100/like', {\n          method: 'POST',\n          body: JSON.stringify(data),\n          headers : new Headers({ \"Content-type\" : \"application/json\" })\n        })\n        .catch(() => {\n          // エラーの時は処理前の値をセットして何もしない\n          setCheckFavorite(checkFavorite);\n          setFavoriteCount(favoriteCount);\n        });\n      }\n    }\n  };\n\n  return(\n    <>\n      <div style={ subRight }>\n        {/* いいねボタン */}\n        <FormControlLabel\n          style={{ marginRight: 0 }}\n          control={\n            <Checkbox\n              icon={<FavoriteBorder fontSize=\"large\" />}\n              checkedIcon={<Favorite fontSize=\"large\" />}\n              name=\"checkedH\"\n              color=\"primary\"\n              checked={ checkFavorite }\n              onClick={ onFavorite }\n              disableRipple={false}\n            />\n          }\n        />\n\n        {/* いいね数 */}\n        <Typography style={ likes }>\n          {// 0のとき表示なし\n          (favoriteCount > 0) && (\n            // 四桁まではそのまま表示\n            (String(favoriteCount).length < 5) ?\n            favoriteCount :\n            // 5桁以上は万で切り捨て。4桁目が0以外なら表示\n            (String(favoriteCount).slice(-4).slice(0, 1) === 0) ?\n            String(favoriteCount).slice(0, -4) +  '万' :\n            String(favoriteCount).slice(0, -4) + '.' + String(favoriteCount).slice(-4).slice(0, 1) +  '万'\n          )}\n        </Typography>\n      </div>\n\n      { loginPopup && <Login /> }\n    </>\n  );\n};\n\nexport default Favorites;","import { useContext } from 'react';\nimport Favorites from '../../Atoms/Favorites';\nimport { UserContext } from '../../App';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport Rating from '@material-ui/lab/Rating';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nconst detail = {\n  display: 'flex',\n  flexDirection: 'row-reverse',\n  alignItems: 'center',\n  justifyContent: 'space-between'\n};\nconst subLeft = {\n  display: 'flex',\n  alignItems: 'center'\n};\n\nfunction Detail(props){\n  const userData = useContext(UserContext);\n  const postTime = new Date(props.created_at);\n  const time = new Date() - postTime;\n\n  const onDelete = (e) => {\n    e.stopPropagation();\n\n    const data = {review_id: props.review_id};\n    fetch('http://localhost:3100/deletePost', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.text())\n    .then(result => {\n      if(result === 'success'){\n        window.location.reload();\n      }\n    });\n  };\n\n  return(\n    <ListItem style={ detail }>\n      <div style={ subLeft }>\n        {\n          (props.user_id === userData.user_id) &&\n          <IconButton style={{ marginRight: 10 }} onClick={ onDelete }>\n            <DeleteIcon fontSize='large' />\n          </IconButton>\n        }\n\n        {\n          (!props.ranking) &&\n          <Favorites\n            likes={ props.likes }\n            review_id={ props.review_id }\n            Ilike={ props.Ilike }\n          />\n        }\n      </div>\n\n      <div style={ subLeft }>\n        {/* 評価 */}\n        {(props.star > 0) && (\n          <Rating\n            style={{ marginRight: 10 }}\n            defaultValue={ props.star / 2 }\n            precision={ 0.5 }\n            size=\"large\"\n            readOnly\n          />\n        )}\n\n        {/* 投稿時間 */}\n        <span style={{ fontSize: 13 }}>\n          {\n            // 投稿されてから1時間以内は分を表示\n            (time < 3600000) ?\n            (Math.floor(time / 1000 / 60) % 60) + '分前' :\n            // 1日以内は時間\n            (time < 86400000) ?\n            (Math.floor(time / 1000 / 60 / 60) % 24) + '時間前' :\n            // 一ヶ月以内は日数\n            (time < 2592000000) ? \n            Math.floor(time / 1000 / 60 / 60 / 24) + '日前' :\n            // それ以上は年/月/日\n            postTime.getFullYear() + '/' + (postTime.getMonth() + 1) + '/' + postTime.getDate()\n          }\n        </span>\n      </div>\n    </ListItem>\n  );\n};\n\nexport default Detail;","import { useHistory } from 'react-router-dom';\nimport Profile from './Profile';\nimport Work from './Work';\nimport Review from './Review';\nimport Detail from './Detail';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\n\nconst profile = {\n  width: '100%',\n  padding: '10px 0'\n};\n\nfunction Item(props){\n  const history = useHistory();\n\n  function onReview(){\n    const work = props.item.work_id + '-' + props.item.genru;\n    history.push('/work/' + work);\n  };\n\n  return(\n    <>\n      <ListItem\n        style={{ padding: 0 }}\n        button\n        onClick={ onReview }\n        ref={ props.lastElementRef && props.lastElementRef }\n      >\n        <List style={ profile }>\n          {/* アイコン、名前、ID */}\n          <Profile\n            picture={ props.item.picture }\n            user_name={ props.item.user_name }\n            user_id={ props.item.user_id }\n          />\n          {/* 作品イメージ、タイトル、作者 */}\n          {\n            (!props.work) &&\n            <Work\n              image={ props.item.image }\n              title={ props.item.title }\n              name={ props.item.name }\n            />\n          }\n          {/* レビュー本文、ネタバレ */}\n          {props.item.review && (\n            <Review\n              review={ props.item.review }\n              neta={ props.item.neta }\n              review_id={ props.item.review_id }\n            />\n          )}\n          {/* 評価、投稿日、いいね */}\n          <Detail\n            user_id={ props.item.user_id }\n            star={ props.item.star }\n            created_at={ props.item.created_at }\n            likes={ props.item.likes }\n            review_id={ props.item.review_id }\n            Ilike={ props.item.Ilike && props.item.Ilike }\n          />\n        </List>\n      </ListItem>\n      <Divider />\n    </>\n  );\n};\n\nfunction Post(props){\n  return(\n    <List style={{ width: '100%', padding: 0 }}>\n      {\n        props.postData.map((item, i) => (\n        props.postData.length !== (i + 1) ?\n        <Item key={ item.review_id } item={ item } work={ props.work } /> :\n        <Item key={ item.review_id } item={ item } work={ props.work } lastElementRef={ props.lastElementRef } />\n        ))\n      }\n    </List>\n  );\n};\n\nexport default Post;","import { Link } from 'react-router-dom';\nimport Typography from '@material-ui/core/Typography';\n\nfunction NotFound(props){\n  return(\n    <Typography style={{ fontSize: 15 }}>\n      {\n        props.account ? '存在しないアカウントです。' :\n        props.timeline ? '投稿が存在しません。' :\n        '存在しないページです。'\n      }\n      <br />\n      {\n        props.timeline ?\n        <Link to='/review' style={{ color:  '#1976d2'}}>作品をレビューする</Link> :\n        <Link to='/' style={{ color:  '#1976d2'}}>トップページへ戻る</Link>\n      }\n    </Typography>\n  );\n};\n\nexport default NotFound;","import { useState, useContext, useRef, useCallback } from 'react';\nimport { UserContext } from '../App';\nimport usePost from '../hooks/usePost';\nimport Post from '../components/Post/Post';\nimport NotFound from './NotFound';\n\nfunction TimelinePage(){\n  const userData = useContext(UserContext);\n  const [page, setPage] = useState(0);\n  const {postData, hasMore} = usePost(userData, page);\n  const observer = useRef();\n\n  // useCallbackで描画ごとにlastElementRefが生成されることを防ぐ\n  const lastElementRef = useCallback((node) => {\n    if(observer.current) observer.current.disconnect();\n\n    // IntersectionObserverでターゲット要素の監視\n    // isIntersectingがtrueなら最後の投稿が表示されているのでpageを+1する\n    observer.current = new IntersectionObserver((entries) => {\n      if(entries[0].isIntersecting && hasMore){\n        setPage((prev) => prev + 1);\n      }\n    });\n\n    if(node) observer.current.observe(node);\n  }, [hasMore]);\n\n  return(\n    postData ? postData.length > 0 ?\n    <Post postData={ postData } lastElementRef={ lastElementRef } /> :\n    <NotFound timeline={ true } /> : ''\n  );\n};\n\nexport default TimelinePage;","import { useState, useEffect } from 'react';\n\nfunction useUserRanking(){\n  const [resultList, setResultList] = useState(null);\n\n  useEffect(() => {\n    fetch('http://localhost:3100/userRanking')\n    .then(response => response.json())\n    .then(result => setResultList({user: result}));\n  }, [])\n\n  return resultList;\n};\n\nexport default useUserRanking;","import { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../App';\n\nfunction useAccount(searchSubmit, searchGenru){\n  const [accountData, setAccountData] = useState(null);\n  const userData = useContext(UserContext);\n\n  useEffect(() => {\n    if(!searchSubmit) return;\n\n    const data = {name: searchSubmit, user_id: userData.user_id};\n\n    fetch('http://localhost:3100/account', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(result => {\n      if(result.length === 0){\n        setAccountData(['empty']);\n      }else{\n        setAccountData(result);\n      }\n    });\n  }, [searchSubmit, searchGenru, userData.user_id]);\n\n  return accountData;\n};\n\nexport default useAccount;","import Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nfunction Header(props){\n  const header = {\n    height: 50,\n    marginLeft: 16,\n    marginTop: props.margin ? 30 : 0,\n    display: 'flex',\n    alignItems: 'center',\n    userSelect: 'none',\n  };\n\n  return(\n    <Paper square elevation={0} style={ header }>\n      { props.icon }\n\n      <Typography style={{ fontSize: 18, marginLeft: 10 }}>\n        人気の{ props.text }\n      </Typography>\n    </Paper>\n  );\n};\n\nexport default Header;","import { useHistory } from 'react-router-dom';\nimport Header from '../../Atoms/Header';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport Typography from '@material-ui/core/Typography';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\n\nconst useStyles = makeStyles(() => ({\n  badge: {\n    width: 25,\n    height: 25,\n    borderRadius: 50,\n    fontSize: 13\n  }\n}));\n\nconst list = {\n  width: '100%',\n  display: 'flex',\n  flexDirection: 'row'\n};\nconst item = {\n  width: 'calc(100% / 3)',\n  display: 'flex',\n  flexDirection: 'column',\n  borderRadius: 5\n};\nconst avatar = {\n  width: 60,\n  height: 'auto',\n  marginBottom: 10\n};\nconst name = {\n  fontSize: 15,\n  fontWeight: 600,\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis'\n};\nconst id = {\n  fontSize: 13,\n  marginBottom: 10\n};\nconst profile = {\n  fontSize: 13,\n  display: '-webkit-box',\n  WebkitLineClamp: 3,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  /*IE*/\n  maxHeight: '57',\n  lineHeight: 1.5\n};\n\nfunction UserRanking(props){\n  const history = useHistory();\n  const classes = useStyles();\n\n  return(\n    <>\n      <Header\n        text='ユーザー'\n        margin={ props.margin && true }\n        icon={<AccountCircleIcon style={{ fontSize: 30 }} color=\"primary\" />}\n      />\n        \n      <List style={ list }>\n        {\n          props.user.map((step, index) => (\n            <ListItem\n              key={ index }\n              style={ item }\n              button\n              onClick={() => {\n                history.push('/account/' + step.user_id);\n              }}\n            >\n              <Badge\n                classes={{ badge: classes.badge }}\n                badgeContent={ index + 1 }\n                color=\"primary\"\n                anchorOrigin={{ vertical: 'top', horizontal: 'left'}}\n              >\n                <Avatar style={ avatar } src={ step.picture } />\n              </Badge>\n\n              <Typography style={ name }>{ step.user_name }</Typography>\n              <Typography style={ id }>@{ step.user_id }</Typography>\n              <Typography style={ profile }>{ step.profile }</Typography>\n            </ListItem>\n          ))\n        }\n      </List>\n    </>\n  );\n};\n\nexport default UserRanking;","import { useState } from 'react';\n\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst form = {\n  width: '80%',\n  margin: 'auto',\n  borderRadius: 5,\n  backgroundColor: '#eee',\n  display: 'flex',\n};\n\nconst base = {\n  width: 'calc(100% - 40px)',\n  paddingLeft: '12px',\n  fontSize: 15\n};\n\nfunction Form(props){\n  const [searchTitle, setSearchTitle] = useState('');\n\n  const titleChange = (e) => {\n    setSearchTitle(e.target.value);\n  }\n\n  const searchSubmit = (e) => {\n    props.setSearchSubmit(searchTitle);\n    e.preventDefault();\n  }\n\n  return(\n    <form style={ form }>\n      {/* 検索 */}\n      <InputBase\n        style={ base }\n        placeholder={ props.placeholder }\n        onChange={ titleChange }\n      />\n      \n      {/* 検索アイコン */}\n      <IconButton\n        type=\"submit\"\n        aria-label=\"search\"\n        onClick={ searchSubmit }\n      >\n        <SearchIcon fontSize=\"large\" />\n      </IconButton>\n    </form>\n  );\n};\n\nexport default Form;","import { Link } from 'react-router-dom';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nfunction MaterialTabs(props){\n  const tabs = {\n    width: '100%',\n    backgroundColor:'rgba(255,255,255,0.8)',\n    position: 'sticky',\n    top: 50,\n    zIndex: 3\n  };\n  \n  const tab = {\n    fontSize: 13,\n    minWidth: `calc(100% / ${ props.tabChoice.length })`\n  };\n\n  function changeTabs(event, newValue){\n    props.setTabValue(newValue);\n  };\n\n  return(\n    <Tabs\n      style={ tabs }\n      value={ props.tabValue }\n      onChange={ changeTabs }\n      indicatorColor=\"primary\"\n    >\n      {\n        props.Link ?\n        props.tabChoice.map((item) =>\n          <Tab\n            style={ tab }\n            key={ item }\n            label={\n              (item.slice(-6) === '/works') ? '鑑賞記録' :\n              (item.slice(-6) === '/likes') ? 'いいね' : 'レビュー'\n            }\n            component={ Link }\n            to={ '/account/' + item }\n            value={ '/account/' + item }\n          />\n        ) :\n        props.tabChoice.map((item) =>\n          <Tab style={ tab } key={ item } label={ item } />\n        )\n      }\n    </Tabs>\n  );\n};\n\nexport default MaterialTabs;","import makeStyales from '@material-ui/core/styles/makeStyles';\nimport Button from '@material-ui/core/Button';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nconst disabled = {\n  width: 100,\n  height: 40,\n  fontSize: 13,\n  fontWeight: 600,\n  borderRadius: 50,\n};\n\nfunction ButttonTab(props){\n  const wide = useMediaQuery('(min-width:500px)');\n  const mini = useMediaQuery('(max-width:320px)');\n\n  const useStyles = makeStyales(() => ({\n    all: {\n      width: 100,\n      height: 40,\n      fontSize: wide ? 13 : 10,\n      fontWeight: 600,\n      color: '#191919',\n      borderRadius: 50,\n      '&.MuiButton-outlined': {\n        border: '1px solid #191919'\n      },\n      '&:hover': {\n        backgroundColor: '#F2F2F2',\n      }\n    },\n    movie: {\n      width: 100,\n      height: 40,\n      fontSize: wide ? 13 : 10,\n      fontWeight: 600,\n      color: '#f9320c',\n      borderRadius: 50,\n      '&.MuiButton-outlined': {\n        border: '1px solid #f9320c'\n      },\n      '&:hover': {\n        backgroundColor: '#FEE9E6',\n      }\n    },\n    music: {\n      width: 100,\n      height: 40,\n      fontSize: wide ? 13 : 10,\n      fontWeight: 600,\n      color: '#ffc952',\n      borderRadius: 50,\n      '&.MuiButton-outlined': {\n        border: '1px solid #ffc952'\n      },\n      '&:hover': {\n        backgroundColor: '#FEF8E6',\n      }\n    },\n    book: {\n      width: 100,\n      height: 40,\n      fontSize: wide ? 13 : 10,\n      fontWeight: 600,\n      color: '#00b9f1',\n      borderRadius: 50,\n      '&.MuiButton-outlined': {\n        border: '1px solid #00b9f1'\n      },\n      '&:hover': {\n        backgroundColor: '#E5F9FF',\n      }\n    },\n    anime: {\n      width: 100,\n      height: 40,\n      fontSize: wide ? 13 : 10,\n      fontWeight: 600,\n      color: '#7200da',\n      borderRadius: 50,\n      '&.MuiButton-outlined': {\n        border: '1px solid #7200da'\n      },\n      '&:hover': {\n        backgroundColor: '#F2E5FF',\n      }\n    },\n  }));\n\n  const classes = useStyles();\n\n  const tab = {\n    width: '100%',\n    backgroundColor: 'rgba(255,255,255,0.8)',\n    position: 'sticky',\n    top: (props.tabChoice.length === 4) ? 50 : 98,\n    zIndex: 3\n  };\n\n  const back = {\n    width: wide ? (props.tabChoice.length === 5) ? '90%' : '80%' : '100%',\n    margin: ((props.tabChoice.length === 5) && mini) ? 0 : '0 auto',\n    padding: '10px 0',\n    display: 'flex',\n    justifyContent: 'space-between',\n  };\n\n  function onButton(e){\n    props.setTabValue(Number(e.currentTarget.value));\n  };\n\n  return(\n    <div style={ tab }>\n      <div style={ back }>\n        {props.tabChoice.map((item, index) => \n          (props.tabValue === index) ?\n          <Button\n            style={ disabled }\n            key={ index }\n            variant='outlined'\n            disabled\n          >\n            { item }\n          </Button>\n          :\n          <Button\n            className={\n              (item === 'All') ? classes.all :\n              (item === '映画') ? classes.movie :\n              (item === '音楽') ? classes.music :\n              (item === '本') ? classes.book :\n              (item === 'アニメ') && classes.anime\n            }\n            key={ index }\n            variant='outlined'\n            onClick={ onButton }\n            value={ index }\n          >\n            { item }\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ButttonTab;","import { useState, useEffect } from 'react';\n\nfunction Movie(searchSubmit, searchGenru){\n  const [searchMovie, setSearchMovie] = useState([]);\n  \n  useEffect(() => {\n    if(!searchSubmit) return;\n    \n    const REACT_APP_MOVIE = process.env.REACT_APP_MOVIE;\n    const resultList = [];\n\n    fetch(`https://api.themoviedb.org/4/search/movie?api_key=${ REACT_APP_MOVIE }&language=ja&page=1&query=${ searchSubmit }`)\n    .then(response => response.json())\n    .then(async result => {\n      var number;\n\n      if(result.results.length === 0){\n        resultList.push('empty');\n      }else if(result.results.length > 9){\n        number = 10;\n      }else{\n        number = result.results.length;\n      }\n\n      for(let i = 0; i < number; i++){\n        const directorList = await [];\n\n        await fetch(`https://api.themoviedb.org/3/movie/${ result.results[i].id }/credits?api_key=${ REACT_APP_MOVIE }&language=jp`)\n        .then(response => response.json())\n        .then(director => director.crew.forEach(item => {\n          if(item.job === 'Director'){\n            directorList.push(item.name);\n          };\n        }));\n        \n        resultList.push({\n          id: result.results[i].id,\n          image: result.results[i].poster_path && 'https://image.tmdb.org/t/p/w500' + result.results[i].poster_path,\n          title: result.results[i].title,\n          name: directorList.join(','),\n          date: result.results[i].release_date\n        });\n      };\n\n      setSearchMovie(resultList);\n    });\n  }, [searchSubmit, searchGenru]);\n\n  return searchMovie;\n};\n\nexport default Movie;","import { useState, useEffect } from 'react'; \n\nfunction Music(searchSubmit, searchGenru){\n  const [searchItem, setSearchItem] = useState([]);\n  \n  useEffect(() => {\n    if(!searchSubmit || !searchGenru) return;\n\n    fetch('http://localhost:3100/music', {\n      method: 'POST',\n      body: JSON.stringify({submit: searchSubmit}),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(data => setSearchItem(data));\n\n    }, [searchSubmit, searchGenru]);\n\n  return searchItem;\n}\n\nexport default Music;\n","import { useState, useEffect } from 'react'; \n\nfunction Book(searchSubmit, searchGenru){\n  const [searchItem, setSearchItem] = useState([]);\n  \n  useEffect(() => {\n    if(!searchSubmit || !searchGenru) return;\n    \n    const resultList = [];\n\n    fetch(`https://www.googleapis.com/books/v1/volumes?q=${ searchSubmit }`)\n    .then(response => response.json())\n    .then(data => {\n      var number;\n\n      if(data.totalItems === 0){\n        resultList.push('empty');\n      }else{\n        number = data.items.length;\n      };\n      \n      for(let i = 0; i < number; i++){\n        resultList.push({\n          id: data.items[i].id,\n          image: data.items[i].volumeInfo.imageLinks && data.items[i].volumeInfo.imageLinks.thumbnail,\n          title: data.items[i].volumeInfo.title,\n          name: data.items[i].volumeInfo.authors ? data.items[i].volumeInfo.authors.join(',') : '',\n          date: data.items[i].volumeInfo.publishedDate\n        });\n      };\n\n      setSearchItem(resultList);\n    });\n\n  }, [searchSubmit, searchGenru]);\n\n  return searchItem;\n}\n\nexport default Book;","import { useState, useEffect } from 'react';\n\nfunction useAnime(searchSubmit, searchGenru){\n  const [searchAnime, setSearchAnime] = useState([]);\n  \n  useEffect(() => {\n    if(!searchSubmit || !searchGenru) return;\n\n    const REACT_APP_ANIME = process.env.REACT_APP_ANIME;\n    const resultList = [];\n\n    fetch(`https://api.annict.com/v1/works?access_token=${ REACT_APP_ANIME }&filter_title=${ searchSubmit }&per_page=10`)\n    .then(response => response.json())\n    .then(data => {\n      var max;\n\n      if(data.works.length === 0){\n        resultList.push('empty');\n      }else{\n        max = data.works.length;\n      }\n\n      for(let i = 0; i < max; i++){\n        resultList.push({\n          id: data.works[i].id,\n          image: data.works[i].images.recommended_url,\n          title: data.works[i].title,\n          name: data.works[i].media_text,\n          date: data.works[i].season_name_text\n        });\n      }\n\n      setSearchAnime(resultList);\n    });\n  }, [searchSubmit, searchGenru]);\n\n  return searchAnime;\n}\n\nexport default useAnime;","import { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { UserContext } from '../../App';\nimport Login from '../Login';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport MovieIcon from '@material-ui/icons/Movie';\n\nconst list = {\n  width: '100%',\n  padding: 5,\n  borderRadius: 10\n};\nconst box = {\n  width: 130,\n  height: 100,\n  display: 'flex',\n  justifyContent: 'center'\n};\nconst image = {\n  maxWidth: 130,\n  maxHeight: 100,\n  borderRadius: 5\n};\nconst text = {\n  width: 'calc(100% - 130px)',\n  height: 100,\n  paddingRight: 10,\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  textAlign: 'center'\n};\nconst title = {\n  display: '-webkit-box',\n  WebkitLineClamp: 2,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  /*IE*/\n  maxHeight: '40',\n};\nconst date = {\n  color: '#757575'\n};\n\nfunction Item(props) {\n  const history = useHistory();\n  const userData = useContext(UserContext);\n  const [loginPopup, setLoginPopup] = useState(false);\n\n  function reviewWrite(){\n    if(props.search){\n      const work = props.item.id + '-' + props.searchGenru;\n      history.push('/work/' + work);\n\n    }else if(userData === 'empty'){\n      setLoginPopup(true);\n      \n    }else{\n      history.push('/review/write', {\n        genru: props.searchGenru,\n        image: props.item.image,\n        title: props.item.title,\n        name: props.item.name,\n        date: props.item.date,\n        id: props.item.id\n      });\n    }\n  };\n\n  return(\n    <>\n      <ListItem style={ list } button onClick={ reviewWrite }>\n        <div style={ box }>\n          {\n            props.item.image ?\n            <img\n              style={ image }\n              src={ props.item.image }\n              alt=\"作品\"\n            /> :\n            <MovieIcon\n              style={{ fontSize: 100 }}\n            />\n          }\n        </div>\n        \n        <ListItemText style={ text }>\n          <Typography style={ title } variant=\"h5\" gutterBottom>{ props.item.title }</Typography>\n          <Typography variant=\"h5\">{ props.item.name }</Typography>\n          <Typography style={ date } variant=\"h6\">{ props.item.date }</Typography>\n        </ListItemText>\n      </ListItem>\n\n      { loginPopup && <Login /> }\n    </>\n  )\n}\n\nexport default Item;","import { useState, useEffect } from 'react';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport CheckIcon from '@material-ui/icons/Check';\n\nconst icon = {\n  height: 50,\n  width: 50,\n};\n\nconst add = {\n  height: 30,\n  width: 30\n};\n\nfunction FollowButton(props){\n  const [checkFollow, setCheckFollow] = useState(false);\n  \n  useEffect(() => {\n    if(props.follow){\n      setCheckFollow(true);\n    }\n  }, [props.follow]);\n\n  const onFollow = (e) => {\n    e.stopPropagation();\n\n    setCheckFollow(!checkFollow);\n\n    const data = {\n      user_id: props.user_id,\n      follower_id: props.follower_id\n    };\n\n    // フォローを外す\n    if(checkFollow){\n      fetch('http://localhost:3100/unFollow', {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: new Headers({ \"Content-type\" : \"application/json\" })\n      })\n      .catch(() => setCheckFollow(checkFollow));\n      \n    // フォローする\n    }else{\n      fetch('http://localhost:3100/follow', {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: new Headers({ \"Content-type\" : \"application/json\" })\n      })\n      .catch(() => setCheckFollow(checkFollow));\n    };\n  };\n\n  return(\n    <IconButton\n      style={ icon }\n      color='primary'\n      onClick={ onFollow }\n    >\n      {\n        checkFollow ?\n        <CheckIcon style={ add } /> :\n        <PersonAddIcon style={ add } />\n      }\n    </IconButton>\n  );\n};\n\nexport default FollowButton;","import { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { UserContext } from '../App';\nimport FollowButton from '../Atoms/FollowButton';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\n\nconst item = {\n  width: '100%',\n  minHeight: 100,\n  borderRadius: 5\n};\nconst avatar = {\n  width: 60,\n  height: 'auto'\n};\nconst text = {\n  minHeight: 50,\n  width: '100%',\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n  justifyContent: 'space-between'\n};\nconst name = {\n  fontSize: 18,\n  fontWeight: 600\n};\nconst id = {\n  fontSize: 15\n};\nconst profile = {\n  fontSize: 15,\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n};\n\nfunction AccountItem(props){\n  const userData = useContext(UserContext);\n  const history = useHistory();\n\n  function onAccount(){\n    history.push('/account/' + props.item.user_id);\n  };\n  \n  return(\n    <ListItem style={ item } button onClick={ onAccount }>\n      <ListItemAvatar style={{ marginRight: 20 }}>\n        <Avatar\n          style={ avatar }\n          src={ props.item.picture }\n          alt='アイコン'\n        />\n      </ListItemAvatar>\n\n      <ListItemText\n        primary={\n          <div style={ text }>\n            <div>\n              <Typography style={ name }>{ props.item.user_name }</Typography>\n              <Typography style={ id }>@{ props.item.user_id }</Typography>\n            </div>\n\n            {((userData !== 'empty') && (userData.user_id !== props.item.user_id)) &&\n              <FollowButton\n                follow={ props.item.follow_id }\n                follower_id={ props.item.user_id }\n                user_id={ userData.user_id }\n              />}\n          </div>\n        }\n        secondary={\n          <Typography style={ profile }>{ props.item.profile }</Typography>\n        }\n      />\n    </ListItem>\n  );\n};\n\nexport default AccountItem;","import { useState } from 'react';\nimport useUserRanking from '../../hooks/useUserRanking';\nimport useAccount from '../../hooks/useAccount';\nimport UserRanking from '../Ranking/UserRanking';\nimport Form from '../../Atoms/Form';\nimport MaterialTabs from '../../Atoms/MaterialTabs';\nimport ButtonTab from '../../Atoms/ButtonTabs';\nimport Movie from '../../components/Review/Movie';\nimport Music from '../../components/Review/Music';\nimport Book from '../../components/Review/Book';\nimport Anime from '../../components/Review/Anime';\nimport Item from '../../components/Review/Item';\nimport AccountItem from '../../components/AccountItem';\n\nimport CircleProgress from '@material-ui/core/CircularProgress';\nimport List from '@material-ui/core/List';\n\nfunction ItemList(props){\n  var workList;\n\n  switch(props.value){\n    case 0:\n      workList = Movie(props.children, props.value);\n      break;\n    case 1:\n      workList = Music(props.children, props.value);\n      break;\n    case 2:\n      workList = Book(props.children, props.value);\n      break;\n    case 3:\n      workList = Anime(props.children, props.value);\n      break;\n    default:\n  };\n\n  return(\n    // 取得中はローディング、空は何も表示しない\n    workList[0] ?\n    workList[0] === 'empty' ? '' :\n    <List style={{ padding: 0 }}>\n      { workList.map(item => <Item key={ item.id } item={ item } searchGenru={ props.value } search={ true } />) }\n    </List> :\n    <CircleProgress style={{ margin: 50 }} />\n  );\n};\n\nfunction AccountResult(props){\n  const accountResult = useAccount(props.children, props.value);\n\n  return(\n    accountResult ?\n    accountResult[0] === 'empty' ? '' :\n    <List style={{ padding: 0 }}>\n      {accountResult.map(item => <AccountItem key={ item.user_id } item={ item } />)}\n    </List> :\n    <CircleProgress style={{ margin: 50 }} />\n  );\n};\n\nfunction TabPanel2(props){\n  const { children, value, index, ...other } = props;\n\n  return(\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <ItemList value={ value } children={ children } />\n      )}\n    </div>\n  );\n};\n\nfunction Result2(props){\n  const [tabValue, setTabValue] = useState(0);\n  const tabChoice = ['映画', '音楽', '本', 'アニメ'];\n\n  return(\n    <>\n      <ButtonTab\n        tabValue={ tabValue }\n        setTabValue={ setTabValue }\n        tabChoice={ tabChoice }\n      />\n\n      {[0, 1, 2, 3].map((item) => \n        <TabPanel2\n          key={ item }\n          value={ tabValue }\n          index={ item }\n        >\n          { props.children }\n        </TabPanel2>\n      )}\n    </>\n  );\n};\n\nfunction TabPanel(props){\n  const { children, value, index, ...other } = props;\n\n  return(\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        (value === 0) ?\n        <Result2 children={ children } /> :\n        <AccountResult children={ children } value={ value } />\n      )}\n    </div>\n  );\n};\n\nfunction Result(props){\n  const [tabValue, setTabValue] = useState(0);\n  const tabChoice = ['作品', 'アカウント'];\n\n  return(\n    <>\n      <MaterialTabs\n        tabValue={ tabValue }\n        setTabValue={ setTabValue }\n        tabChoice={ tabChoice }\n      />\n\n      {[0, 1].map((item) => \n        <TabPanel\n          key={ item }\n          value={ tabValue }\n          index={ item }\n        >\n          { props.searchSubmit }\n        </TabPanel>\n      )}\n    </>\n  );\n};\n\nfunction SearchPage(){\n  const resultList = useUserRanking();\n  const [searchSubmit, setSearchSubmit] = useState('');\n  const placeholder = '作品名、またはアカウント名で検索！';\n\n  return(\n    <>\n      <Form setSearchSubmit={ setSearchSubmit } placeholder={ placeholder } />\n\n      {\n        searchSubmit ?\n        <Result searchSubmit={ searchSubmit } /> :\n        resultList ?\n        <UserRanking user={ resultList.user } margin={ true } /> :\n        <CircleProgress />\n      }\n    </>\n  );\n};\n\nexport default SearchPage;","import { useState, useEffect } from 'react';\n\nfunction useRanking(){\n  const [resultList, setResultList] = useState(null);\n\n  useEffect(() => {\n    const work = fetch('http://localhost:3100/workRanking').then(response => response.json()).then(result => result);\n    const like = fetch('http://localhost:3100/likeRanking').then(response => response.json()).then(result => result);\n    const user = fetch('http://localhost:3100/userRanking').then(response => response.json()).then(result => result);\n\n    Promise.all([work, like, user])\n    .then(value => {\n      setResultList({work: value[0], like: value[1], user: value[2]});\n    });\n  }, []);\n\n  return resultList;\n};\n\nexport default useRanking;","import { useHistory } from 'react-router-dom';\nimport Header from '../../Atoms/Header';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Badge from '@material-ui/core/Badge';\nimport Typography from '@material-ui/core/Typography';\nimport Rating from '@material-ui/lab/Rating';\nimport MovieIcon from '@material-ui/icons/Movie';\nimport CreateIcon from '@material-ui/icons/Create';\n\nconst useStyles = makeStyles(() => ({\n  badge: {\n    width: 25,\n    height: 25,\n    borderRadius: 50,\n    fontSize: 13\n  }\n}));\n\nconst list = {\n  width: '100%',\n  display: 'flex',\n  flexDirection: 'row'\n};\nconst item = {\n  width: 'calc(100% / 3)',\n  display: 'flex',\n  flexDirection: 'column',\n  borderRadius: 5\n};\nconst image = {\n  maxWidth: '100%',\n  maxHeight: 200,\n  borderRadius: 5,\n  margin: 'auto'\n};\nconst text = {\n  textAlign: 'center'\n};\nconst title = {\n  fontSize: 15,\n  fontWeight: 600,\n  display: '-webkit-box',\n  WebkitLineClamp: 2,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  /*IE*/\n  maxHeight: '40',\n  lineHeight: 1.5\n};\nconst avatar = {\n  width: 60,\n  height: 'auto',\n  marginBottom: 10\n};\nconst name = {\n  fontSize: 15,\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis'\n};\nconst id = {\n  fontSize: 13,\n  marginBottom: 10\n};\n\nfunction LikeRanking(props){\n  const classes = useStyles();\n  const history = useHistory();\n\n  return(\n    <>\n      <Header\n        text={ props.like ? '投稿' : '作品' }\n        margin={ props.margin && true }\n        icon={<CreateIcon style={{ fontSize: 30 }} color=\"primary\" />}\n      />\n\n      <List style={ list }>\n        {\n          props.work.map((step, index) => (\n            <ListItem\n              key={ index }\n              style={ item }\n              button\n              onClick={() => {\n                const work = step.work_id + '-' + step.genru;\n                history.push('/work/' + work);\n              }}\n            >\n              {props.like && (\n                <>\n                  <Avatar style={ avatar } src={ step.picture } />\n                  <Typography style={ name }>{ step.user_name }</Typography>\n                  <Typography style={ id }>@{ step.user_id }</Typography>\n                </>\n              )}\n\n              <Badge\n                style={{ height: 200, }}\n                classes={{ badge: classes.badge }}\n                badgeContent={ index + 1 }\n                color=\"primary\"\n                anchorOrigin={{ vertical: 'top', horizontal: 'left'}}\n              >\n                {\n                  step.image ?\n                  <img style={ image } src={ step.image } alt={ step.title } /> :\n                  <MovieIcon style={{width: 100, height: 'auto'}} />\n                }\n              </Badge>\n  \n              <ListItemText style={ text }>\n                <Typography style={ title }>\n                  { step.title }\n                </Typography>\n\n                <Typography style={ name }>\n                  { step.name }\n                </Typography>\n              </ListItemText>\n\n              {\n                props.like &&\n                <Rating\n                  defaultValue={ step.star / 2 }\n                  precision={ 0.5 }\n                  size=\"large\"\n                  readOnly\n                />\n              }\n            </ListItem>\n          ))\n        }\n      </List>\n    </>\n  );\n};\n\nexport default LikeRanking;","import useRanking from '../../hooks/useRanking';\nimport WorkRanking from './WorkRanking';\nimport UserRanking from './UserRanking';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\n\nconst back = {\n  width: 'calc(100% - 30px)',\n  padding: '50px 0 50px 30px',\n  backgroundColor: '#b71c1c',\n  borderRadius: 5\n};\nconst intro ={\n  fontSize: 18,\n  fontWeight: 600,\n  textAlign: 'left',\n  color: 'white'\n};\n\nfunction RankingPage(){\n  const resultList = useRanking();\n\n  return(\n    resultList ?\n    <>\n      <div style={ back }>\n        <Typography style={ intro }>\n          映画、音楽、本、アニメから<br />\n          好きな作品を選んでレビューするサイト\n        </Typography>\n      </div>\n\n      <WorkRanking work={ resultList.work } />\n      <Divider />\n      <WorkRanking work={ resultList.like } like={ true } />\n      <Divider />\n      <UserRanking user={ resultList.user } />\n      <Divider />\n    </>\n    : <CircularProgress />\n  );\n}\n\nexport default RankingPage;","import { useState, useEffect } from \"react\";\n\nfunction useWorkRanking(){\n  const [resultList, setResultList] = useState(null);\n\n  useEffect(() => {\n    fetch('http://localhost:3100/workRanking')\n    .then(response => response.json())\n    .then(result => setResultList({work: result}));\n  }, [])\n\n  return resultList;\n};\n\nexport default useWorkRanking;","import { useState } from 'react';\nimport useWorkRanking from '../../hooks/useWorkRanking';\nimport Form from '../../Atoms/Form';\nimport WorkRanking from '../Ranking/WorkRanking';\nimport ButtonTab from '../../Atoms/ButtonTabs';\nimport Movie from '../../components/Review/Movie';\nimport Music from '../../components/Review/Music';\nimport Book from '../../components/Review/Book';\nimport Anime from '../../components/Review/Anime';\nimport Item from '../../components/Review/Item';\n\nimport CircleProgress from '@material-ui/core/CircularProgress';\nimport List from '@material-ui/core/List';\n\nfunction ItemList(props){\n  var workList;\n\n  switch(props.value){\n    case 0:\n      workList = Movie(props.children, props.value);\n      break;\n    case 1:\n      workList = Music(props.children, props.value);\n      break;\n    case 2:\n      workList = Book(props.children, props.value);\n      break;\n    case 3:\n      workList = Anime(props.children, props.value);\n      break;\n    default:\n  };\n\n  return(\n    // 取得中はローディング、空は何も表示しない\n    workList[0] ?\n    workList[0] === 'empty' ? '' :\n    <List style={{ padding: 0 }}>\n      { workList.map(item => (<Item key={ item.id } item={ item } searchGenru={ props.value } />)) }\n    </List> :\n    <CircleProgress style={{ margin: 50 }} />\n  );\n};\n\nfunction TabPanel(props){\n  const { children, value, index, ...other } = props;\n\n  return(\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <ItemList value={ value } children={ children } />\n      )}\n    </div>\n  );\n};\n\nfunction Result(props){\n  const [tabValue, setTabValue] = useState(0);\n  const tabChoice = ['映画', '音楽', '本', 'アニメ'];\n\n  return(\n    <>\n      <ButtonTab\n        tabValue={ tabValue }\n        setTabValue={ setTabValue }\n        tabChoice={ tabChoice }\n      />\n\n      {[0, 1, 2, 3].map((item) => \n        <TabPanel\n          key={ item }\n          value={ tabValue }\n          index={ item }\n        >\n          { props.searchSubmit }\n        </TabPanel>\n      )}\n    </>\n  );\n};\n\nfunction Search(){\n  const resultList = useWorkRanking();\n  const [searchSubmit, setSearchSubmit] = useState('');\n  const placeholder = 'レビューしたい作品を検索！'\n\n  return(\n    <>\n      <Form setSearchSubmit={ setSearchSubmit } placeholder={ placeholder } />\n\n      {\n        searchSubmit ?\n        <Result searchSubmit={ searchSubmit } /> :\n        resultList ?\n        <WorkRanking work={ resultList.work } margin={ true } /> :\n        <CircleProgress />\n      }\n    </>\n  );\n};\n\nexport default Search;","import Button from '@material-ui/core/Button';\n\nfunction MaterialButton(props){\n  const button = {\n    width: 100,\n    height: 40,\n    fontSize: 15\n  };\n\n  return(\n    props.disabled ?\n    <Button\n      disabled\n      style={ button }\n      color={ props.color }\n      variant=\"contained\"\n      disableElevation\n      fontSize=\"large\"\n      endIcon={ props.endIcon && props.endIcon }\n      onClick={ props.pushSubmit }\n    >\n      { props.text }\n    </Button> :\n    <Button\n      style={ button }\n      color={ props.color }\n      variant=\"contained\"\n      disableElevation\n      fontSize=\"large\"\n      endIcon={ props.endIcon && props.endIcon }\n      onClick={ props.pushSubmit }\n    >\n      { props.text }\n    </Button>\n  );\n};\n\nexport default MaterialButton;","import { useState, useContext } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport MaterialButton from '../../Atoms/MaterialButton';\nimport { UserContext } from '../../App';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport Rating from '@material-ui/lab/Rating';\nimport Create from '@material-ui/icons/Create';\n\nconst paper = {\n  backgroundColor: 'hsla(0, 0%, 100%, 0.90)',\n};\nconst title = {\n  fontSize: 18,\n  textAlign: 'center'\n};\nconst name = {\n  fontSize: 15,\n  textAlign: 'center'\n};\nconst date = {\n  fontSize: 13,\n  color: '#6e6e6e',\n  textAlign: 'center',\n};\nconst form = {\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n};\nconst field = {\n  height: 'auto',\n  width: '100%',\n  marginBottom: 5,\n};\nconst input = {\n  color: 'black',\n  fontSize: 15,\n};\nconst neta = {\n  marginRight: 0,\n  marginBottom: 10,\n  fontSize: 15,\n  userSelect: 'none'\n};\nconst netaText = {\n  fontSize: 15,\n  margin: 0\n};\nconst star = {\n  fontSize: 35,\n  marginBottom: 20\n};\n\nfunction Write(){\n  const location = useLocation();\n  const locationList = location.state;\n\n  const useStyles = makeStyles(() => ({\n    dialog: {\n      maxWidth: 678,\n      '&.MuiDialog-root': {\n        zIndex: '2 !important',\n        margin: '50px auto 60px auto'\n      },\n    },\n    dialogTitle: {\n      '&.MuiDialogTitle-root': {\n        paddingBottom: 0\n      }\n    },\n    content: { \n      '&.MuiDialogContent-root': {\n        paddingBottom: 16\n      }\n    }\n  }));\n\n  const backdrop = {\n    maxWidth: 678,\n    margin: '0 auto',\n    backgroundImage: `url(${locationList.image})`,\n    backgroundColor: '#999999',\n    backgroundPosition: 'center',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n  };\n\n  const classes = useStyles();\n  const [reviewText, setReviewText] = useState('');\n  const [reviewNeta, setReviewNeta] = useState(0);\n  const [reviewStar, setReviewStar] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(false);\n  const history = useHistory();\n  const userData = useContext(UserContext);\n\n  const reviewChange = (e) => {\n    setReviewText(e.target.value);\n  };\n\n  const netaChange = () => {\n    setReviewNeta((reviewNeta === 0) ? 1 : 0);\n  };\n\n  const pushSubmit = (e) => {\n    e.preventDefault();\n    \n    const data = {\n      // レビュー\n      user_id: userData.user_id,\n      work_id: locationList.id,\n      review: reviewText,\n      genru: locationList.genru,\n      neta: reviewNeta,\n      star: (reviewStar === 0) ? null : reviewStar * 2,\n      // 作品\n      title: locationList.title,\n      name: locationList.name,\n      image: locationList.image,\n      date: locationList.date\n    };\n\n    fetch('http://localhost:3100/review', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.text())\n    .then(result => {\n      if(result === 'success'){history.push('/timeline')}\n    })\n    .catch(() => setErrorMessage(true));\n  }\n\n  return(\n    <Dialog\n      PaperProps={{ style: paper }}\n      BackdropProps={{style: backdrop}}\n      className={ classes.dialog }\n      fullWidth={ true }\n      maxWidth=\"lg\"\n      open={ true }\n      scroll=\"body\"\n    >\n      <DialogTitle className={ classes.dialogTitle }>\n        <Typography style={ title }>{ locationList.title }</Typography>\n      </DialogTitle>\n\n      <DialogContent className={ classes.content }>\n        <Typography style={ name } variant=\"h5\" >\n          { locationList.name }\n        </Typography>\n\n        <Typography style={ date } variant=\"h6\" >\n          { locationList.date }\n        </Typography>\n\n        <form style={ form }>\n          <TextField\n            style={ field }\n            InputProps={{ style: input }}\n            placeholder=\"作品をレビューする。\"\n            multiline\n            rows={ 15 }\n            onChange={ reviewChange }\n          />\n\n          <Typography variant=\"h5\" style={{ marginBottom: 10 }} >\n            ({ reviewText.length }/1000)\n          </Typography>\n\n          <FormControlLabel\n            style={ neta }\n            control={ <Switch color=\"primary\" onChange={ netaChange } /> }\n            label={\n              <Typography style={ netaText }>\n                ネタバレ\n              </Typography>\n          }\n          />\n\n          <Rating\n            style={ star }\n            precision={ 0.5 }\n            name=\"unique-rating\"\n            onChange={ (event, newValue) => {\n              setReviewStar(newValue);\n            }}\n          />\n\n          <MaterialButton\n            pushSubmit={ pushSubmit }\n            text=\"投稿\"\n            color='primary'\n            endIcon={ <Create /> }\n          />\n\n          { errorMessage && <Typography style={{ marginTop: 10, fontSize: 15, color: 'red' }}>エラーが発生しました。</Typography> }\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default Write;\n","import { Route } from 'react-router-dom';\n\nimport Search from './Search';\nimport Write from './Write';\n\nfunction ReviewPage(){\n  return(\n    <>\n      <Route exact path=\"/review\" component={ Search } />\n      <Route path=\"/review/write\" component={ Write } />\n    </>\n  );\n}\n\nexport default ReviewPage;\n","import { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../App';\n\n// レビューの取得\nfunction useMyPost(accountData, page){\n  const userData = useContext(UserContext);\n  const [postData, setPostData] = useState('');\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    if(!accountData) return;\n    \n    const data = {user_id: userData.user_id, account_id: accountData.user_id, page: page};\n    \n    fetch('http://localhost:3100/myPosts', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(result => {\n      // 0ページ目は初期化、それ以降は末尾に追加していく\n      if(page === 0){\n        setPostData(result);\n      }else{\n        setPostData((prev) => [...prev, ...result]);\n      };\n\n      (result.length === 0) && setHasMore(false);\n    });\n  }, [accountData, page, userData.user_id]);\n\n  return {postData, hasMore};\n};\n\nexport default useMyPost;","import { useState, useEffect } from 'react';\n\n// 自分のページか他ユーザーのページかを区別する\nfunction useAccountData(userData, paramsId){\n  const [accountData, setAccountData] = useState('');\n\n  useEffect(() => {\n    if(paramsId === userData.user_id){\n      setAccountData(userData);\n\n    }else{\n      const data = {id: paramsId, user_id: userData.user_id};\n      \n      fetch('http://localhost:3100/profile', {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers : new Headers({ \"Content-type\" : \"application/json\" })\n      })\n      .then(response => response.json())\n      .then(result => {\n        setAccountData(result[0]);\n      });\n    }\n  }, [userData, paramsId]);\n\n  return accountData;\n};\n\nexport default useAccountData;","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport FollowButton from '../../Atoms/FollowButton';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\n\nconst item = {\n  width: '100%',\n  minHeight: 100,\n  borderRadius: 5\n};\nconst text = {\n  minHeight: 50,\n  width: '100%',\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n  justifyContent: 'space-between'\n};\nconst avator = {\n  width: 80,\n  height: 80,\n  marginRight: 10\n};\nconst name = {\n  fontSize: 18,\n  fontWeight: 600\n};\nconst id = {\n  fontSize: 15\n};\nconst profile = {\n  fontSize: 15,\n  padding: '0 16px 0'\n};\nconst follow = {\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n  justifyContent: 'start',\n  color: 'black'\n};\n\nfunction Profile(props){\n  const location = useLocation();\n\n  useEffect(() => {\n    if(!location.state){return}\n\n    if(location.state.referrer === '/setting'){\n      \n    }\n  }, [location.state]);\n\n  return(\n    <>\n      <ListItem style={ item }>\n        <ListItemAvatar style={{ marginRight: 20 }}>\n          <Avatar\n            style={ avator }\n            src={ props.accountData.picture }\n            alt={ 'ユーザーアイコン' }\n          />\n        </ListItemAvatar>\n\n        <ListItemText\n          primary={\n            <div style={ text }>\n              <div>\n                <Typography style={ name }>{ props.accountData.user_name }</Typography>\n                <Typography style={ id }>{ props.accountData.user_id }</Typography>\n              </div>\n\n              {\n                (props.accountData.user_id !== props.user_id) &&\n                <FollowButton\n                  follow={ props.accountData.follow_id }\n                  follower_id={ props.accountData.user_id }\n                  user_id={ props.user_id }\n                />\n              }\n            </div>\n          }\n          secondary={\n            <div style={ follow }>\n              <Typography style={{ fontSize: 15 }}>{ props.accountData.follow }</Typography>\n              <Typography style={{ marginRight: 10, fontSize: 13, paddingTop: 3 }}>フォロー</Typography>\n              <Typography style={{ fontSize: 15 }}>{ props.accountData.follower }</Typography>\n              <Typography style={{ fontSize: 13, paddingTop: 3 }}>フォロワー</Typography>\n            </div>\n          }\n        />\n      </ListItem>\n\n      <Typography style={ profile }>{ props.accountData.profile }</Typography>\n    </>\n  );\n};\n\nexport default Profile;","import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport ButtonTab from '../../Atoms/ButtonTabs';\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Typography from '@material-ui/core/Typography';\nimport Rating from '@material-ui/lab/Rating';\nimport MovieIcon from '@material-ui/icons/Movie';\n\nconst useStyles = makeStyles(() => ({\n  base: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    fontSize: 15,\n    display: 'flex',\n    flexDirection: 'column',\n    color: 'white',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    zIndex: 2,\n    visibility: 'hidden',\n  },\n  hover: {\n    '&:hover': {\n      '& $base': {\n        visibility: 'visible'\n      }\n    }\n  },\n}));\n\nconst image = {\n  width: 'auto',\n  height: 'calc(100% - 65px)',\n};\nconst title = {\n  fontSize: 15,\n  padding: '25px 0 0'\n};\n\nfunction TabChildren(props){\n  const history = useHistory();\n  const classes = useStyles();\n\n  return(\n    <GridList cols={3}>\n      {props.postData.map((item, i) => (\n        props.postData.length !== (i + 1) ?\n          <GridListTile\n            className={ classes.hover }\n            key={ item.review_id } \n          >\n            <ButtonBase\n              className={ classes.base }\n              onClick={() => {\n                const work = item.work_id + '-' + item.genru;\n                history.push('/work/' + work);\n              }}\n            >\n              { item.title }\n              {(item.star !== 0) && (\n                <Rating\n                  defaultValue={ item.star / 2 }\n                  precision={ 0.5 }\n                  size=\"large\"\n                  readOnly\n                />\n              )}\n            </ButtonBase>\n\n            {item.image ?\n              <img src={ item.image } alt={ item.title } /> :\n              <>\n                <Typography style={ title }>\n                  { item.title }\n                </Typography>\n                <MovieIcon style={ image } />\n              </>\n            }\n          </GridListTile>\n          :\n          <GridListTile\n            className={ classes.hover }\n            key={ item.review_id } \n            ref={ props.lastElementRef && props.lastElementRef }\n          >\n            <ButtonBase\n              className={ classes.base }\n              onClick={() => {\n                const work = item.work_id + '-' + item.genru;\n                history.push('/work/' + work);\n              }}\n            >\n              { item.title }\n              {(item.star !== 0) && (\n                <Rating\n                  defaultValue={ item.star / 2 }\n                  precision={ 0.5 }\n                  size=\"large\"\n                  readOnly\n                />\n              )}\n            </ButtonBase>\n\n            {item.image ?\n              <img src={ item.image } alt={ item.title } /> :\n              <>\n                <Typography style={ title }>\n                  { item.title }\n                </Typography>\n                <MovieIcon style={ image } />\n              </>\n            }\n          </GridListTile>\n      ))}\n    </GridList>\n  );\n};\n\nfunction TabPanel(props){\n  const { children, value, index, ...other } = props;\n\n  // 表示されているタブ && データが存在 && All以外のタブ\n  if((value === index) && children && (value !== 0)){\n    var data = children.filter(item => {\n      return item.genru === value - 1\n    });\n  }\n    \n  return(\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <TabChildren\n          postData={ value === 0 ? children : data }\n          lastElementRef={ props.lastElementRef }\n        />\n      )}\n    </div>\n  );\n};\n\nfunction Works(props){\n  const [tabValue, setTabValue] = useState(0);\n  const tabChoice = ['All', '映画', '音楽', '本', 'アニメ'];\n\n  return(\n    <>\n      <ButtonTab\n        tabValue={ tabValue }\n        setTabValue={ setTabValue }\n        tabChoice={ tabChoice }\n      />\n\n      {[0, 1, 2, 3, 4].map(item => \n        <TabPanel\n          key={ item } \n          value={ tabValue } \n          index={ item } \n          lastElementRef={ props.lastElementRef }\n        >\n          { props.postData }\n        </TabPanel>\n      )}\n    </>\n  );\n};\n\nexport default Works;","import { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../App';\n\n// レビューの取得\nfunction useLike(accountData, page){\n  const userData = useContext(UserContext);\n  const [postData, setPostData] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    if(!accountData) return;\n\n    const data = {user_id: userData.user_id, account_id: accountData.user_id, page: page};\n      \n    fetch('http://localhost:3100/favorites', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(result => {\n      // 0ページ目は初期化、それ以降は末尾に追加していく\n      if(page === 0){\n        setPostData(result);\n      }else{\n        setPostData(prev => [...prev, ...result]);\n      };\n\n      (result.length === 0) && setHasMore(false);\n    });\n  }, [accountData, page, userData.user_id]);\n\n  return {postData, hasMore};\n};\n\nexport default useLike;","import { useState, useRef, useCallback } from 'react';\nimport useLike from '../../hooks/useLike';\nimport Post from '../../components/Post/Post';\n\nfunction Likes(props){\n  const [page, setPage] = useState(0);\n  const observer = useRef();\n  const {postData, hasMore} = useLike(props.accountData, page);\n\n  // 最後の投稿を表示した際に次の投稿を読み込む\n  const lastElementRef = useCallback((node) => {\n    if(observer.current) observer.current.disconnect();\n\n    // IntersectionObserverはターゲット要素の監視\n    // isIntersectingがtrueなら最後の投稿が表示されているのでpageを+1する\n    observer.current = new IntersectionObserver((entries) => {\n      if(entries[0].isIntersecting && hasMore){\n        setPage((prev) => prev + 1);\n      }\n    });\n    \n    if(node) observer.current.observe(node);\n  }, [hasMore]);\n\n  return(\n    postData && (\n      <Post\n        postData={ postData }\n        accountData={ props.accountData }\n        lastElementRef={ lastElementRef }\n      />\n    )\n  );\n};\n\nexport default Likes;","import { useState, useContext, useRef, useCallback, useEffect } from 'react';\nimport { Switch, Route, useLocation, useParams } from 'react-router-dom';\nimport { UserContext } from '../../App';\nimport useMyPost from '../../hooks/useMyPost';\nimport useAccountData from '../../hooks/useAccountData';\nimport Profile from './Profile';\nimport MaterialTabs from '../../Atoms/MaterialTabs';\nimport Post from '../../components/Post/Post';\nimport Works from './Works';\nimport Likes from './Likes';\nimport NotFound from '../NotFound';\n\nfunction AccountPage(){\n  const location = useLocation();\n  const userData = useContext(UserContext);\n  const params = useParams();\n  const [paramsId, setParamsId] = useState(params.id);\n  const [page, setPage] = useState(0);\n  const [tabValue, setTabValue] = useState(location.pathname);\n  const tabChoice = [paramsId, paramsId + '/works', paramsId + '/likes'];\n  const observer = useRef();\n  \n  // ①自分のページか他ユーザーのページかを区別し、accountDataに格納する\n  const accountData = useAccountData(userData, paramsId);\n  // ②レビューと作品を取得し１つの投稿にまとめる\n  const {postData, hasMore} = useMyPost(accountData, page);\n\n  // 表示するアカウントが変わった時\n  useEffect(() => {\n    if(params.id === paramsId) return;\n    setParamsId(params.id);\n    setPage(0);\n  }, [params, paramsId]);\n\n  // URL直打でwork, likeタブを表示する時\n  useEffect(() => {\n    if(tabValue === location.pathname) return;\n    \n    setTabValue(location.pathname);\n  }, [location.pathname, tabValue]);\n\n  // 最後の投稿を表示した際に次の投稿を読み込む\n  const lastElementRef = useCallback((node) => {\n    if(observer.current) observer.current.disconnect();\n\n    // IntersectionObserverはターゲット要素の監視\n    // isIntersectingがtrueなら最後の投稿が表示されているのでpageを+1する\n    observer.current = new IntersectionObserver((entries) => {\n      if(entries[0].isIntersecting && hasMore){\n        setPage((prev) => prev + 1);\n      }\n    });\n    \n    if(node) observer.current.observe(node);\n  }, [hasMore]);\n\n  return(\n    <>      \n      {\n        accountData && (accountData !== 'empty') &&\n        <>\n          {/* プロフィール */}\n          <Profile accountData={ accountData } user_id={ userData.user_id } />\n\n          {/* タブ */}\n          <MaterialTabs\n            tabValue={ tabValue }\n            setTabValue={ setTabValue }\n            tabChoice={ tabChoice }\n            Link={ true }\n          />\n        </>\n      }\n\n      {/* アカウントが存在しない場合 */}\n      { (accountData === 'empty') && <NotFound account={true} /> }\n\n      <Switch>\n        {/* レビューTab*/}\n        <Route exact path=\"/account/:id\">\n          {\n            postData ? postData.length > 0 ?\n            <Post postData={ postData } lastElementRef={ lastElementRef } /> :\n            <NotFound timeline={ true } /> : ''\n          }\n        </Route>\n        {/* 鑑賞記録Tab */}\n        <Route path=\"/account/:id/works\">\n          {\n            postData ? postData.length > 0 ?\n            <Works postData={  postData } lastElementRef={ lastElementRef} /> :\n            <NotFound timeline={ true } /> : ''\n          }\n        </Route>\n        {/* いいねTab */}\n        <Route path=\"/account/:id/likes\">\n          <Likes accountData={ accountData } lastElementRef={ lastElementRef } />\n        </Route>\n      </Switch>\n    </>\n  );\n};\n\nexport default AccountPage;\n","// https://codesandbox.io/s/react-image-crop-demo-with-react-hooks-y831o?file=/src/App.js:0-3132\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\n\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\n\nconst back = {\n  zIndex: 8,\n};\nconst paper = {\n  width: '80%',\n  maxWidth: 560,\n  height: 500,\n  padding: 30,\n};\nconst image = {\n  marginBottom: 10,\n};\nconst box = {\n  width: 130,\n  height: 130,\n  margin: 'auto',\n  marginBottom: 10,\n};\nconst canvas = {\n  width: 130,\n  height: 130,\n  borderRadius: '50%'\n};\nconst button = {\n  width: 100,\n  height: 40,\n  fontSize: '1.5rem',\n};\n\nexport default function App(props){\n  const imgRef = useRef(null);\n  const previewCanvasRef = useRef(null);\n  const [crop, setCrop] = useState({ unit: '%', width: 30, aspect: 1 / 1 });\n  const [canvasResult, setCanvasResult] = useState('');\n  const [completedCrop, setCompletedCrop] = useState(null);\n  \n  const onLoad = useCallback((img) => {\n    imgRef.current = img;\n  }, []);\n  \n  // 範囲を決定して閉じる\n  function onCanvas(){\n    props.setCropResult(canvasResult);\n    props.setInputImage('');\n  };\n  \n  // 決定せず破棄して閉じる\n  function noCanvas(e){\n    if(e.currentTarget){\n      props.setInputImage('');\n    }\n  };\n\n  useEffect(() => {\n    if (!completedCrop || !previewCanvasRef.current || !imgRef.current) {\n      return;\n    }\n\n    const image = imgRef.current;\n    const canvas = previewCanvasRef.current;\n    const crop = completedCrop;\n\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    const ctx = canvas.getContext('2d');\n    const pixelRatio = window.devicePixelRatio;\n\n    canvas.width = crop.width * pixelRatio;\n    canvas.height = crop.height * pixelRatio;\n\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    ctx.imageSmoothingQuality = 'high';\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n\n    // setCanvasResult(canvas.toDataURL());\n    canvas.toBlob((b) => {\n      setCanvasResult(b);\n    }, 'image/jpeg', 1.0);\n    \n  }, [completedCrop]);\n\n  return (\n    <Backdrop style={ back } open={ true }>\n      <ClickAwayListener onClickAway={ noCanvas }>\n        <Paper style={ paper }>\n          <div>\n            {/* 画像全体 */}\n            <ReactCrop\n              style={ image }\n              src={props.inputImage}\n              onImageLoaded={onLoad}\n              crop={crop}\n              circularCrop={ true }\n              onChange={(e) => setCrop(e)}\n              onComplete={(e) => setCompletedCrop(e)}\n            />\n              \n            {/* 切り取った画像 */}\n            <div style={ box }>\n              <canvas style={ canvas } ref={previewCanvasRef} />\n            </div>\n\n            <Button\n              style={ button }\n              color=\"primary\"\n              variant=\"contained\"\n              disableElevation\n              fontSize=\"large\"\n              onClick={ onCanvas }\n            >\n              決定\n            </Button>\n          </div>\n        </Paper>\n      </ClickAwayListener>\n    </Backdrop>\n  );\n}","import { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Icon from '../components/Icon';\nimport MaterialButton from '../Atoms/MaterialButton';\nimport { UserContext } from '../App';\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Avator from '@material-ui/core/Avatar';\nimport TextField from '@material-ui/core/TextField';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\n\nconst useStyles = makeStyles((theme) => ({\n  back: {\n    maxWidth: '100%',\n    minHeight: '100%',\n    padding: '50px 30px',\n    '@media(min-width: 678px)': {\n      margin: '0 calc((100% - 678px) / 2)',\n    },\n    backgroundColor: 'white',\n    zIndex: 5,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0\n  },\n  cancel: {\n    position: 'absolute',\n    top: 0,\n    right: 10,\n    '@media (mix-width: 600px)': {\n      right: 24\n    },\n  },\n  title: {\n    marginBottom: theme.spacing(3),\n  },\n  form: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  box: {\n    width: 120,\n    height: 120,\n    marginBottom: 10,\n    position: 'relative'\n  },\n  avator: {\n    width: '100%',\n    height: '100%',\n    zIndex: 6,\n  },\n  hidden: {\n    width: 120,\n    height: 120,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 7,\n    opacity: 0,\n    cursor: 'pointer',\n    '&:hover': {\n      opacity: 0.8\n    }\n  },\n  sub: {\n    marginBottom: 25,\n  },\n  label: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  typo: {\n    marginRight: 5\n  },\n  field: {\n    width: '100%',\n    marginBottom: 25,\n    '&.MuiInputBase-input': {\n      height: 20\n    },\n    '& .MuiOutlinedInput-root': {\n      '&:hover fieldset': {\n        borderColor: '#b71c1c',\n      },\n      '&.Mui-focused fieldset': {\n        borderColor: '#b71c1c',\n      },\n    },\n  },\n}));\n\nfunction Setting(){\n  const userData = useContext(UserContext);\n  const [imageName, setImageName] = useState('');\n  const [inputImage, setInputImage] = useState('');\n  const [cropResult, setCropResult] = useState('');\n  const [inputName, setInputName] = useState(userData.user_name);\n  const [inputId, setInputId] = useState(userData.user_id);\n  const [inputProf, setInputProf] = useState(userData.profile);\n  const [errorMessage, setErrorMessage] = useState('');\n  const classes = useStyles();\n\n  const onFile = (e) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const reader = new FileReader();\n      reader.addEventListener('load', () => setInputImage(reader.result));\n      reader.readAsDataURL(e.target.files[0]);\n\n      // 正規表現でファイル名と拡張子に分けた配列を作り、ファイル名だけを取り出す\n      setImageName(e.target.files[0].name.split(/(?=\\.[^.]+$)/)[0]);\n    };\n  };\n\n  const pushSubmit = async(e) => {\n    await e.preventDefault();\n\n    // ①名前を変更した時、1文字以上あるか\n    if(inputName !== userData.user_name){\n      if(inputName.length < 1){\n        setErrorMessage('nameError');\n        return;\n      };\n    };\n\n    // ②idを変更した時、5文字以上で英数字記号だけか\n    if(inputId !== userData.user_id){\n      if(inputId.length < 5 || inputId.match(/^[0-9A-Za-z_-]+$/) === null){\n        setErrorMessage('idError');\n        return;\n      };\n    };\n\n    // ③画像を変更した時\n    if(cropResult){\n      const pictureHead = userData.picture.slice(0, 22);\n      \n      // ③-①すでに初期画像から変更したことがあるなら日数を調べ、30日以上なら削除する\n      if(pictureHead === 'https://audience-icons'){\n        const timeCheck = await fetch('http://localhost:3100/delete', {\n          method: 'POST',\n          body: JSON.stringify({ image: userData.picture }),\n          headers : {\"Content-type\" : \"application/json\"}\n        });\n\n        const response = await timeCheck.json();\n        var resTimeCheck = response.result;\n      };\n\n      // ③-② 削除が完了、または初期画像なら最新の画像をS3にアップロードする\n      if(resTimeCheck === 'deleted' || pictureHead !== 'https://audience-icons'){\n        const formData = await new FormData();\n        await formData.append('icon', cropResult, imageName);\n        \n        const sendS3 = await fetch('http://localhost:3100/icon', {\n          method: 'POST',\n          body: formData,\n        });\n        const response = await sendS3.text();\n\n        if(response !== 'uploadError'){\n          var successPicture = response;\n        }else{\n          setErrorMessage('uploadError')\n          return;\n        };\n\n      }else if(isFinite(resTimeCheck)){\n        // 30日未満の数値が返ってきた時\n        const day = Math.round(resTimeCheck / 1000 / 60 / 60 / 24);\n        setErrorMessage(day);\n        return;\n\n      }else{\n        // その他のエラー\n        setErrorMessage('error');\n        return;\n      };\n    };\n\n    const data = await {\n      old_id: userData.user_id,\n      picture: successPicture ? successPicture : userData.picture,\n      user_name: inputName,\n      user_id: inputId,\n      profile: inputProf\n    };\n\n    // ④ RDSにアップロード\n    fetch('http://localhost:3100/setting', {\n      method: 'POST',\n      body: JSON.stringify(data), \n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.text())\n    .then(result => {      \n      if(result === 'success'){\n        window.location.reload();\n      }else if(result === 'already'){\n        setErrorMessage('already');\n      }else{\n        setErrorMessage('authError');\n      }\n    })\n    .catch(() => { setErrorMessage('authError') });\n  };\n\n  return(\n    <>\n      {/* 画像を選択した時Cropを表示 */}\n      {inputImage && (\n        <Icon\n          setCropResult={ setCropResult }\n          inputImage={ inputImage }\n          setInputImage={ setInputImage }\n        />\n      )}\n\n      <div className={ classes.back }>\n        {/* キャンセルマーク */}\n        <IconButton\n          className={ classes.cancel }\n          component={ Link }\n          to={ '/account/' + userData.user_id }\n        >\n          <CloseIcon style={{ fontSize: 25 }} />\n        </IconButton>\n\n        <form className={ classes.form } onSubmit={ pushSubmit }>\n          <Typography variant=\"h5\" gutterBottom>プロフィール画像</Typography>\n\n          <div className={ classes.box }>\n            {/* プロフィール画像 */}\n            <Avator\n              className={ classes.avator }\n              src={ cropResult ? URL.createObjectURL(cropResult) : userData.picture }\n              alt=\"プロフィール画像\"\n            />\n\n            {/* カメラアイコン */}\n            <label htmlFor=\"picture\">\n              <Avator className={ classes.hidden }>\n                <CameraAltIcon style={{ fontSize: 30 }} />\n              </Avator>\n            </label>\n\n            {/* display: noneとして、forとidでinputに紐付け */}\n            <input\n              style={{ display: 'none' }}\n              id=\"picture\"\n              type=\"file\"\n              accept=\"image/png, image/jpeg\"\n              onChange={ onFile }\n              onClick={ (e) => {\n                // 同じファイルを選択してもセットできるようにvalueを初期化する\n                e.target.value = '';\n              }}\n            />\n          </div>\n\n          <Typography\n            className={ classes.sub }\n            variant=\"subtitle1\"\n            color=\"primary\"\n          >\n            プロフィール画像の変更は30日間に1回の制限があります。\n          </Typography>\n\n          <div className={ classes.label }>\n            <Typography\n              className={ classes.typo }\n              variant=\"h5\"\n              gutterBottom\n            >\n              ユーザー名\n            </Typography>\n            <Typography variant=\"h5\">({ inputName.length }/20)</Typography>\n          </div>\n          <TextField\n            className={ classes.field }\n            multiline\n            defaultValue={ userData.user_name }\n            variant=\"outlined\"\n            inputProps={{\n              style: { fontSize: '1.5rem', lineHeight: 1 },\n              maxLength: 20,\n              }}\n            onChange={ (e) => setInputName(e.target.value) }\n          />\n\n          <div className={ classes.label }>\n            <Typography\n              className={ classes.typo }\n              variant=\"h5\"\n              gutterBottom\n            >ユーザーID</Typography>\n            <Typography variant=\"h5\">({ inputId.length }/20)</Typography>\n          </div>\n          <TextField\n            className={ classes.field }\n            multiline\n            defaultValue={ userData.user_id }\n            variant=\"outlined\"\n            inputProps={{\n              style: { fontSize: '1.5rem', lineHeight: 1 },\n              minLength: 5,\n              maxLength: 20,\n              // pattern: \"^[0-9A-Za-z_-]+$\"\n            }}\n            onChange={ (e) => setInputId(e.target.value) }\n          />\n\n          <div className={ classes.label }>\n            <Typography\n              className={ classes.typo }\n              variant=\"h5\"\n              gutterBottom\n            >\n              プロフィール\n            </Typography>\n            <Typography variant=\"h5\">({ inputProf? inputProf.length : 0 }/160)</Typography>\n          </div>\n\n          <TextField\n            className={ classes.field }\n            multiline\n            rows={ 5 }\n            defaultValue={ userData.profile }\n            variant=\"outlined\"\n            inputProps={{\n              style: { fontSize: '1.5rem', lineHeight: 1 },\n              maxLength: 160,\n              }}\n            onChange={ (e) => setInputProf(e.target.value) }\n          />\n\n          <Typography\n            className={ classes.sub }\n            variant=\"h5\"\n            color=\"primary\"\n          >\n            { (errorMessage || errorMessage === 0) && (\n            isFinite(errorMessage) ? 'プロフィール画像は' + (30 - errorMessage) + '日後に変更可能です。'\n            : errorMessage === 'idError' ? 'IDは5文字以上で半角英数字とハイフン(-)、アンダーバー(_)が使用できます。'\n            : errorMessage === 'nameError' ? '名前は1文字以上で設定してください。'\n            : errorMessage === 'uploadError' ? '画像のアップロードに失敗しました。'\n            : errorMessage === 'authError' ? 'プロフィールの変更に失敗しました。'\n            : errorMessage === 'already' ? 'このIDはすでに使用されています。'\n            : errorMessage === 'error' && 'エラーが発生しました。')}\n          </Typography>\n\n          <MaterialButton pushSubmit={ pushSubmit } color='primary' text=\"保存\" />\n        </form>\n      </div>\n    </>\n  )\n}\n\nexport default Setting;","import { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../App';\n\n// レビューの取得\nfunction useWorkPost(work_id, genru, page){\n  const userData = useContext(UserContext);\n  const [postData, setPostData] = useState('');\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    if(!work_id || !genru) return;\n    \n    const data = {user_id: userData.user_id, work_id: work_id, genru: genru, page: page};\n    \n    fetch('http://localhost:3100/workPosts', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(result => {\n      // 0ページ目は初期化、それ以降は末尾に追加していく\n      if(page === 0){\n        setPostData(result);\n      }else{\n        setPostData(prev => [...prev, ...result]);\n      };\n\n      (result.length === 0) && setHasMore(false);\n    });\n  }, [work_id, page, genru, userData.user_id]);\n\n  return {postData, hasMore};\n};\n\nexport default useWorkPost;","import { useState, useEffect } from 'react';\n\nfunction Movie(work){\n  const [searchMovie, setSearchMovie] = useState(null);\n  \n  useEffect(() => {\n    if(!work) return;\n    \n    const REACT_APP_MOVIE = process.env.REACT_APP_MOVIE;\n    const directorList = [];\n\n    fetch(`https://api.themoviedb.org/3/movie/${ work }?api_key=${ REACT_APP_MOVIE }&language=ja`)\n    .then(response => response.json())\n    .then(async result => {\n      await fetch(`https://api.themoviedb.org/3/movie/${ work }/credits?api_key=${ REACT_APP_MOVIE }&language=jp`)\n      .then(response => response.json())\n      .then(director => {\n        director.crew.forEach(item => {\n          if(item.job === 'Director'){\n            directorList.push(item.name);\n          };\n        })\n      });\n\n      setSearchMovie({\n        id: result.id,\n        image: result.poster_path && 'https://image.tmdb.org/t/p/w500' + result.poster_path,\n        title: result.title,\n        name: directorList.join(','),\n        date: result.release_date,\n        detail: result.overview,\n        url: result.homepage\n      });\n    });\n  }, [work]);\n\n  return searchMovie;\n};\n\nexport default Movie;","import { useState, useEffect } from 'react'; \n\nfunction Music(work){\n  const [searchItem, setSearchItem] = useState(null);\n  \n  useEffect(() => {\n    if(!work) return;\n\n    const data = {id: work}\n\n    fetch('http://localhost:3100/music', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(data =>  setSearchItem(data));\n\n    }, [work]);\n\n  return searchItem;\n}\n\nexport default Music;\n","import { useState, useEffect } from 'react'; \n\nfunction Book(work){\n  const [searchItem, setSearchItem] = useState(null);\n  \n  useEffect(() => {\n    if(!work) return;\n\n    fetch(`https://www.googleapis.com/books/v1/volumes/${ work }`)\n    .then(response => response.json())\n    .then(data => setSearchItem({\n      id: data.id,\n      image: data.volumeInfo.imageLinks && data.volumeInfo.imageLinks.thumbnail,\n      title: data.volumeInfo.title,\n      name: data.volumeInfo.authors ? data.volumeInfo.authors.join(',') : '',\n      date: data.volumeInfo.publishedDate,\n      detail: data.volumeInfo.description,\n      url: data.volumeInfo.previewLink\n    }));\n\n  }, [work]);\n\n  return searchItem;\n}\n\nexport default Book;","import { useState, useEffect } from 'react';\n\nfunction useAnime(work){\n  const [searchAnime, setSearchAnime] = useState(null);\n  \n  useEffect(() => {\n    if(!work) return;\n\n    const REACT_APP_ANIME = process.env.REACT_APP_ANIME;\n\n    fetch(`https://api.annict.com/v1/works?access_token=${ REACT_APP_ANIME }&filter_ids=${ work }`)\n    .then(response => response.json())\n    .then(data => {\n\n      setSearchAnime({\n        id: data.works[0].id,\n        image: data.works[0].images.recommended_url && data.works[0].images.recommended_url,\n        title: data.works[0].title,\n        name: data.works[0].media_text,\n        date: data.works[0].season_name_text,\n        url: data.works[0].official_site_url && data.works[0].official_site_url\n      });\n    });\n  }, [work]);\n\n  return searchAnime;\n}\n\nexport default useAnime;","import { useState, useEffect } from 'react';\n\nfunction useStar(work_id, genru){\n  const [average, setAverage] = useState(null);\n\n  useEffect(() => {\n    if(!work_id || !genru) return;\n\n    const data = {work_id: work_id, genru: genru};\n\n    fetch('http://localhost:3100/average', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers : new Headers({ \"Content-type\" : \"application/json\" })\n    })\n    .then(response => response.json())\n    .then(result => setAverage(result[0].average));\n  }, [work_id, genru]);\n\n  return average;\n};\n\nexport default useStar;","import { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { UserContext } from '../../App';\nimport useStar from '../../hooks/useStar';\nimport MaterialButton from '../../Atoms/MaterialButton';\nimport MovieIcon from '@material-ui/icons/Movie';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Typography from '@material-ui/core/Typography';\nimport Rating from '@material-ui/lab/Rating';\n\nconst useStyles = makeStyles(() => ({\n  detail: {\n    fontSize: 15,\n    margin: '0 16px 16px',\n    display: '-webkit-box',\n    WebkitLineClamp: 5,\n    WebkitBoxOrient: 'vertical',\n    overflow: 'hidden',\n    // /*IE*/\n    lineHeight: 1.8,\n    maxHeight: 135,\n  },\n}));\n\nconst minImage = {\n  height: 150,\n  maxWidth: 100,\n  marginRight: 10\n};\nconst wideImage = {\n  width: 200,\n  maxWidth: 300,\n  height: 'auto',\n  marginRight: 10\n};\nconst minText = {\n  maxHeight: 150\n};\nconst wideText = {\n  maxHeight: 200\n};\nconst rate = {\n  display: 'flex',\n  justifyContent: 'center'\n}\nconst title = {\n  fontSize: 18,\n  fontWeight: 600,\n  textAlign: 'center'\n};\nconst name = {\n  fontSize: 15,\n  textAlign: 'center'\n};\nconst date = {\n  fontSize: 15,\n  color: '#757575',\n  textAlign: 'center'\n};\nconst button = {\n  width: 220,\n  margin: '0 auto 16px',\n  display: 'flex',\n  justifyContent: 'space-between'\n};\n\nfunction Introduction(props){\n  const userData = useContext(UserContext);\n  const classes = useStyles();\n  const history = useHistory();\n  const wide = useMediaQuery('(min-width:500px)');\n  const average = useStar(props.workData.id, props.genru);\n  \n  function onReview(){\n    history.push('/review/write', {\n      genru: props.genru,\n      image: props.workData.image,\n      title: props.workData.title,\n      name: props.workData.name,\n      date: props.workData.date,\n      id: props.workData.id\n    });\n  };\n\n  function onSite(){\n    window.open(props.workData.url, \"_blank\");\n  };\n\n  return(\n    <>\n      <ListItem>\n        <ListItemAvatar>\n          {\n            props.workData.image ?\n            <img style={ wide ? wideImage : minImage } src={ props.workData.image } alt={ props.workData.title } /> :\n            <MovieIcon />\n          }\n        </ListItemAvatar>\n\n        <ListItemText\n          style={ wide ? wideText : minText }\n          primary={\n            <>\n              <Typography style={ title }>{ props.workData.title }</Typography>\n              <Typography style={ name }>{ props.workData.name }</Typography>\n              <Typography style={ date }>{ props.workData.date }</Typography>\n            </>\n          }\n          secondary={\n            (average > 0) && (\n              <div style={ rate }>\n                <Rating\n                  defaultValue={ average / 2 }\n                  precision={ 0.5 }\n                  size=\"large\"\n                  readOnly\n                />\n              </div>\n            )\n          }\n        />\n      </ListItem>\n\n      <Typography className={ classes.detail } >{ props.workData.detail }</Typography>\n      \n      <div style={ button }>\n        <MaterialButton text=\"レビュー\" color=\"primary\" pushSubmit={ onReview } disabled={ (userData === 'empty') && true } />\n        {\n          props.workData.url ?\n            <MaterialButton text=\"サイトへ\" pushSubmit={ onSite } /> :\n            <MaterialButton text=\"サイトへ\" pushSubmit={ onSite } disabled={ true } />\n        }\n      </div>\n    </>\n  );\n};\n\nexport default Introduction;","import { useState, useCallback, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useWorkPost from '../../hooks/useWorkPost';\nimport Movie from '../../components/Work/Movie';\nimport Music from '../../components/Work/Music';\nimport Book from '../../components/Work/Book';\nimport Anime from '../../components/Work/Anime';\nimport Introduction from './Introduction';\nimport Post from '../../components/Post/Post';\nimport NotFound from '../NotFound';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nfunction Work(){\n  const params = useParams();\n  const [page, setPage] = useState(0);\n  const {postData, hasMore} = useWorkPost(params.work.split('-')[0], params.work.split('-')[1], page);\n  const observer = useRef();\n\n  // useCallbackで描画ごとにlastElementRefが生成されることを防ぐ\n  const lastElementRef = useCallback((node) => {\n    if(observer.current) observer.current.disconnect();\n\n    // IntersectionObserverでターゲット要素の監視\n    // isIntersectingがtrueなら最後の投稿が表示されているのでpageを+1する\n    observer.current = new IntersectionObserver((entries) => {\n      if(entries[0].isIntersecting && hasMore){\n        setPage((prev) => prev + 1);\n      }\n    });\n\n    if(node) observer.current.observe(node);\n  }, [hasMore]);\n\n  let workData;\n\n  switch(params.work.split('-')[1]){\n    case '0':\n      workData = Movie(params.work.split('-')[0]);\n      break;\n    case '1':\n      workData = Music(params.work.split('-')[0]);\n      break;\n    case '2':\n      workData = Book(params.work.split('-')[0]);\n      break;\n    case '3':\n      workData = Anime(params.work.split('-')[0]);\n      break;\n    default:\n  };\n\n  return(\n    <>\n      {\n        workData ?\n        <Introduction workData={ workData } genru={ params.work.split('-')[1] } /> :\n        <CircularProgress />\n      }\n\n      {\n        postData ? postData.length > 0 ?\n        <Post postData={ postData } lastElementRef={ lastElementRef } work={ true } /> :\n        <NotFound timeline={ true } /> : ''\n      }\n    </>\n  );\n};\n\nexport default Work;","import React, { createContext } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport useLogin from './hooks/useLogin';\nimport Navbar from './views/Navbar';\nimport TimelinePage from './views/TimelinePage';\nimport SearchPage from './views/Search/SearchPage';\nimport RankingPage from './views/Ranking/RankingPage';\nimport ReviewPage from './views/Review/ReviewPage';\nimport AccountPage from './views/Account/AccountPage';\nimport Setting from './views/Setting';\nimport WorkPage from './views/Work/WorkPage';\nimport NotFound from './views/NotFound';\nimport Login from './components/Login';\nimport './App.css';\n\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CircleProgress from '@material-ui/core/CircularProgress';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#b71c1c',\n      light: '#f05545',\n      dark: '#7f0000',\n    },\n    secondary: {\n      main: '#efebe9',\n      light: '#ffffff',\n      dark: '#bdb9b7',\n    },\n  },\n  typography: {\n    fontFamily: [\n      '-apple-system', \n      'BlinkMacSystemFont', \n      '\"Helvetica Neue\"', \n      'YuGothic', \n      '\"ヒラギノ角ゴ ProN W3\"', \n      'Hiragino Kaku Gothic ProN', \n      'Arial', \n      '\"メイリオ\"', \n      'Meiryo', \n      'sans-serif'\n    ].join(','),\n  },\n  props: {\n    MuiButtonBase: {\n      // ボタンクリック時のrippleアニメーションをオフ\n      disableRipple: true,\n    },\n  },\n});\n\nfunction App(){\n  const userData = useLogin();\n\n  // ログインしていなければ案内するページ\n  function PrivateRoute(props){\n    return(\n      (userData !== 'empty') ?\n      <Route path={ props.path } component={ props.component } /> :\n      <Login />\n    );\n  };\n\n  return(\n    <BrowserRouter>\n      <ThemeProvider theme={ theme }>\n        <UserContext.Provider value={ userData }>\n          <div style={{ maxWidth: 678, margin: 'auto' }} >\n            <Navbar />\n            {\n              (userData === 'loading') ? <CircleProgress /> :\n              <Switch>\n                <PrivateRoute path=\"/timeline\" component={ TimelinePage } />\n                <Route path=\"/search\" component={ SearchPage } />\n                <Route exact path=\"/\" component={ RankingPage } />\n                <Route path=\"/review\" component={ ReviewPage } />\n                <PrivateRoute path=\"/account/:id\" component={ AccountPage } />\n                { (userData === 'empty') && <PrivateRoute exact path=\"/account\" /> }\n                <PrivateRoute path=\"/setting\" component={ Setting } />\n                <Route path=\"/work/:work\" component={ WorkPage } />\n                <Route component={ NotFound } />\n              </Switch>\n            }\n          </div>\n        </UserContext.Provider>\n      </ThemeProvider>\n    </BrowserRouter>\n  );\n};\n\nexport const UserContext = createContext();\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n// Auth0\nimport { Auth0Provider } from '@auth0/auth0-react';\nconst REACT_APP_AUTH0_DOMAIN = process.env.REACT_APP_AUTH0_DOMAIN;\nconst REACT_APP_AUTH0_CLIENT = process.env.REACT_APP_AUTH0_CLIENT;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Auth0Provider\n      domain={ REACT_APP_AUTH0_DOMAIN }\n      clientId={ REACT_APP_AUTH0_CLIENT }\n      audience={`https://${ REACT_APP_AUTH0_DOMAIN }/api/v2/`}\n    >\n      <App />\n    </Auth0Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}